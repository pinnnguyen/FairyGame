import{e as de,s as M,v as ce,j as x,i as N,x as _e,y as ue,o as a,c as r,z as V,d as q,_ as G,u as e,A as c,l as y,B as t,t as b,C as i,F as me,D as fe,E as pe,G as ye,H as z,I as ve,J as he}from"./entry.5e8a55ee.js";import{u as F,B as O,T as xe,_ as be,a as ge,b as we,c as Ee,d as Be}from"./useBattleRound.9c8c5cd4.js";import{_ as Re,f as Ce}from"./index.ef37a08c.js";import{u as Te}from"./usePlayer.4510c797.js";import{u as ke}from"./useSocket.c2536292.js";const Ie=q(()=>G(()=>import("./battle-result.0606d1c5.js"),["./battle-result.0606d1c5.js","./entry.5e8a55ee.js","./entry.1769143d.css","./ButtonConfirm.ef25d3da.js","./useBattleRound.9c8c5cd4.js","./index.ef37a08c.js","./usePlayer.4510c797.js"],import.meta.url).then(l=>l.default||l)),$e=q(()=>G(()=>import("./refresh-mid.6d9035c2.js"),["./refresh-mid.6d9035c2.js","./index.ef37a08c.js","./entry.5e8a55ee.js","./entry.1769143d.css","./usePlayer.4510c797.js"],import.meta.url).then(l=>l.default||l)),je={key:2,class:"h-screen bg-white"},Ae={class:"h-[60%] bg-bg_pve bg-cover"},De={key:0,class:"text-center pt-2 text-base font-semibold flex items-center justify-center"},Se={class:"flex justify-between p-2 pt-2"},Pe={class:"flex items-center justify-start"},Le={class:"flex items-center justify-end"},Me={class:"flex justify-around mt-8"},Ne={class:"flex items-end justify-end"},Ve={class:"h-[170px] overflow-auto w-[48%] bg-[#6879a3] mt-2 mx-2 rounded float-left"},ze=t("p",{class:"text-center text-base font-semibold"}," L\u1ECBch s\u1EED ",-1),Fe={class:"w-[80%] h-[170px] overflow-auto float-right bg-[#6879a3] mt-2 mx-2 rounded"},Oe=t("p",{class:"text-center text-base font-semibold"}," H\u1EA1ng s\xE1t th\u01B0\u01A1ng ",-1),qe={class:"p-2 text-white"},Ge={class:"flex items-center flex-col justify-center fixed w-full bottom-2"},He={class:"flex items-center"},Ye=t("span",{class:"z-9 text-10"}," V\u1EC1 th\xE0nh ",-1),Xe=de({__name:"[boss]",setup(l){const{loading:H,state:o,receiver:g,playerEffect:w,realTime:E,battleRounds:Y,battleResult:_,reward:J,refreshTime:K,inRefresh:U,rankDMG:Q}=M(F()),{playerInfo:B}=M(Te()),{_socket:d}=ke(),v=ce(),{startBattle:W}=F(),X=x(()=>v.query.target==="boss-daily"),R=x(()=>v.query.target),Z=x(()=>v.query.id),u=N(!1),m=N(!1);_e(()=>{var h,s,f;d.emit("battle:join",`${(h=B.value)==null?void 0:h._id}-battle-boss-daily`,{kind:R.value?O.BOSS_FRAME_TIME:O.BOSS_DAILY,player:{userId:(s=B.value)==null?void 0:s.userId},target:{type:(f=R.value)!=null?f:xe.MONSTER,id:Z.value}}),d.on("battle:start",async p=>{console.log("war",p),await W(p)})}),ue(()=>{console.log("battle:leave"),d.emit("battle:leave")});const ee=()=>(_.value.show=!1,z("/")),te=()=>{console.log("retry"),_.value.show=!1,d.emit("battle:refresh")},se=()=>{console.log("refreshFinished"),d.emit("battle:refresh")};return(h,s)=>{const f=Ie,p=ve,C=he,T=be,oe=ge,ae=we,ne=Ee,le=$e,re=Be,ie=Re;return a(),r(ie,null,{default:V(()=>{var k,I,$,j,A,D,S,P,L;return[e(_).show?(a(),r(f,{key:0,"battle-result":e(_),reward:e(J),onClose:ee,onRetry:te},null,8,["battle-result","reward"])):c("",!0),e(H)?(a(),r(p,{key:1})):(a(),y("div",je,[t("div",Ae,[e(X)?c("",!0):(a(),y("div",De," ["+b((k=e(o).enemy)==null?void 0:k.name)+"] ",1)),t("div",Se,[t("div",null,[t("div",Pe,[t("div",{class:"flex items-center",onClick:s[0]||(s[0]=n=>u.value=!e(u))},[i(C,{format:"webp",class:"h-[35px] border border-[#d0d0d0] bg-[#d0d0d0] rounded-full",src:"/pve/player-avatar.png"})])]),e(u)?(a(),r(T,{key:0,name:(I=e(o).player)==null?void 0:I.name,hp:($=e(o).player)==null?void 0:$.hp,damage:(j=e(o).player)==null?void 0:j.damage,def:(A=e(o).player)==null?void 0:A.def,onClose:s[1]||(s[1]=n=>u.value=!1)},null,8,["name","hp","damage","def"])):c("",!0)]),t("div",null,[t("div",Le,[t("div",{class:"flex justify-end",onClick:s[2]||(s[2]=n=>m.value=!e(m))},[i(C,{format:"webp",class:"h-[35px] border border-[#d0d0d0] bg-[#d0d0d0] rounded-full",src:"/pve/monter-avatar.png"})])]),e(m)?(a(),r(T,{key:0,name:(D=e(o).enemy)==null?void 0:D.name,hp:(S=e(o).enemy)==null?void 0:S.hp,damage:(P=e(o).enemy)==null?void 0:P.damage,def:(L=e(o).enemy)==null?void 0:L.def,onClose:s[3]||(s[3]=n=>m.value=!1)},null,8,["name","hp","damage","def"])):c("",!0)])]),t("div",Me,[i(oe,{"player-effect":e(w),state:e(o),receiver:e(g),"real-time":e(E)},null,8,["player-effect","state","receiver","real-time"]),i(ae,{"player-effect":e(w),state:e(o),receiver:e(g),"real-time":e(E)},null,8,["player-effect","state","receiver","real-time"])])]),t("div",Ne,[t("div",Ve,[ze,i(ne,{"battle-rounds":e(Y)},null,8,["battle-rounds"])]),t("div",Fe,[Oe,t("div",qe,[(a(!0),y(me,null,fe(e(Q),n=>(a(),y("div",{key:n._id,class:"flex justify-between mx-1 my-1"},[t("span",null,"(1) "+b(n._id),1),pe(),t("span",null,b(e(Ce)(n.totalDamage)),1)]))),128))])])]),t("div",Ge,[e(U)?(a(),r(le,{key:0,"refresh-time":e(K),onRefreshFinished:se},null,8,["refresh-time"])):c("",!0),t("div",He,[i(re,{class:"mx-2","class-name":"h-[23px]",onClick:s[4]||(s[4]=ye(n=>e(z)("/"),["stop"]))},{default:V(()=>[Ye]),_:1})])])]))]}),_:1})}}});export{Xe as default};

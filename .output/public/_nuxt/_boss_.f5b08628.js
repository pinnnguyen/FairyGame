import{e as U,s as S,v as J,j as g,i as P,x as Q,y as W,o,c as n,z as X,d as Z,_ as ee,u as e,A as i,l as A,B as s,t as te,C as l,D as ae,E as se,F as oe}from"./entry.e04b7afd.js";import{u as D,B as ne,T as le,_ as re,a as de,b as ce,c as ie}from"./useBattleRound.23cb2bea.js";import{_ as ue}from"./index.cdedaa16.js";import{u as me}from"./usePlayer.703c932a.js";import{u as _e}from"./useSocket.cfb86e86.js";const fe=Z(()=>ee(()=>import("./battle-result.3d357447.js"),["./battle-result.3d357447.js","./entry.e04b7afd.js","./entry.da1dee1c.css","./ButtonConfirm.70ea9dbb.js","./ButtonCancel.116b3a26.js","./index.cdedaa16.js","./usePlayer.703c932a.js","./useBattleRound.23cb2bea.js"],import.meta.url).then(u=>u.default||u)),pe={key:2,class:"h-screen bg-white"},ye={class:"h-[60%] bg-bg_pve bg-cover"},ve={key:0,class:"text-center pt-2 text-base font-semibold flex items-center justify-center"},be={class:"flex justify-between p-2 pt-2"},ge={class:"flex items-center justify-start"},he={class:"flex items-center justify-end"},xe={class:"flex justify-around mt-8"},Be={class:"p-4 h-[25%] overflow-scroll"},Ee=U({__name:"[boss]",setup(u){const{loading:N,state:a,receiver:h,playerEffect:x,realTime:B,battleRounds:q,battleResult:m,reward:L}=S(D()),{playerInfo:_}=S(me()),{_socket:f}=_e(),p=J(),{startBattle:O}=D(),V=g(()=>p.query.target==="boss-daily"),z=g(()=>p.query.target),M=g(()=>p.query.id),r=P(!1),d=P(!1);Q(()=>{var y,t,c;f.emit("battle:join",`${(y=_.value)==null?void 0:y._id}-battle-boss-daily`,{kind:ne.BOSS_DAILY,player:{userId:(t=_.value)==null?void 0:t.userId},target:{type:(c=z.value)!=null?c:le.MONSTER,id:M.value}}),f.on("battle:start",async v=>{await O(v)})}),W(()=>{console.log("battle:leave"),f.emit("battle:leave")});const Y=()=>(m.value.show=!1,ae("/"));return(y,t)=>{const c=fe,v=se,k=oe,w=re,F=de,G=ce,H=ie,K=ue;return o(),n(K,null,{default:X(()=>{var T,C,R,E,I,$,j;return[e(m).show?(o(),n(c,{key:0,"battle-result":e(m),reward:e(L),onClose:Y},null,8,["battle-result","reward"])):i("",!0),e(N)?(o(),n(v,{key:1})):(o(),A("div",pe,[s("div",ye,[e(V)?i("",!0):(o(),A("div",ve," ["+te((R=(C=(T=e(_))==null?void 0:T.mid)==null?void 0:C.current)==null?void 0:R.name)+"] ",1)),s("div",be,[s("div",null,[s("div",ge,[s("div",{class:"flex items-center",onClick:t[0]||(t[0]=b=>r.value=!e(r))},[l(k,{format:"webp",class:"h-[35px] border border-[#d0d0d0] bg-[#d0d0d0] rounded-full",src:"/pve/player-avatar.png"})])]),e(r)?(o(),n(w,{key:0,name:e(a).player.name,hp:e(a).player.hp,damage:e(a).player.damage,def:e(a).player.def,onClose:t[1]||(t[1]=b=>r.value=!1)},null,8,["name","hp","damage","def"])):i("",!0)]),s("div",null,[s("div",he,[s("div",{class:"flex justify-end",onClick:t[2]||(t[2]=b=>d.value=!e(d))},[l(k,{format:"webp",class:"h-[35px] border border-[#d0d0d0] bg-[#d0d0d0] rounded-full",src:"/pve/monter-avatar.png"})])]),e(d)?(o(),n(w,{key:0,name:(E=e(a).enemy)==null?void 0:E.name,hp:(I=e(a).enemy)==null?void 0:I.hp,damage:($=e(a).enemy)==null?void 0:$.damage,def:(j=e(a).enemy)==null?void 0:j.def,onClose:t[3]||(t[3]=b=>d.value=!1)},null,8,["name","hp","damage","def"])):i("",!0)])]),s("div",xe,[l(F,{"player-effect":e(x),state:e(a),receiver:e(h),"real-time":e(B)},null,8,["player-effect","state","receiver","real-time"]),l(G,{"player-effect":e(x),state:e(a),receiver:e(h),"real-time":e(B)},null,8,["player-effect","state","receiver","real-time"])])]),s("div",Be,[l(H,{"battle-rounds":e(q)},null,8,["battle-rounds"])])]))]}),_:1})}}});export{Ee as default};

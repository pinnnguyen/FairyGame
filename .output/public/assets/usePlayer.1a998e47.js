import{i as y,N as $,w as O,u as F,O as j,P as S,Q as A,M as I,a as q,j as f,R}from"./entry.937bdf01.js";var m;const v=typeof window<"u",x=e=>typeof e=="function",J=e=>typeof e=="string",K=()=>{};v&&((m=window==null?void 0:window.navigator)!=null&&m.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function D(e){return typeof e=="function"?e():F(e)}function E(e,t){function i(...n){return new Promise((s,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(a)})}return i}const h=e=>e();function C(e=h){const t=y(!0);function i(){t.value=!1}function n(){t.value=!0}const s=(...a)=>{t.value&&e(...a)};return{isActive:A(t),pause:i,resume:n,eventFilter:s}}function L(e){return e}function d(e){return j()?(S(e),!0):!1}function _(...e){if(e.length===2){const[t,i]=e;t.value=i}if(e.length===3){const[t,i,n]=e;t[i]=n}}function T(e,t=1e3,i={}){const{immediate:n=!0,immediateCallback:s=!1}=i;let a=null;const o=y(!1);function l(){a&&(clearInterval(a),a=null)}function c(){o.value=!1,l()}function u(){const r=D(t);r<=0||(o.value=!0,s&&e(),l(),a=setInterval(e,r))}if(n&&v&&u(),$(t)||x(t)){const r=O(t,()=>{o.value&&v&&u()});d(r)}return d(c),{isActive:o,pause:c,resume:u}}var w=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,V=(e,t)=>{var i={};for(var n in e)N.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&w)for(var n of w(e))t.indexOf(n)<0&&W.call(e,n)&&(i[n]=e[n]);return i};function k(e,t,i={}){const n=i,{eventFilter:s=h}=n,a=V(n,["eventFilter"]);return O(e,E(s,t),a)}var H=Object.defineProperty,M=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,P=(e,t,i)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,U=(e,t)=>{for(var i in t||(t={}))g.call(t,i)&&P(e,i,t[i]);if(p)for(var i of p(t))b.call(t,i)&&P(e,i,t[i]);return e},z=(e,t)=>M(e,Q(t)),B=(e,t)=>{var i={};for(var n in e)g.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&p)for(var n of p(e))t.indexOf(n)<0&&b.call(e,n)&&(i[n]=e[n]);return i};function X(e,t,i={}){const n=i,{eventFilter:s}=n,a=B(n,["eventFilter"]),{eventFilter:o,pause:l,resume:c,isActive:u}=C(s);return{stop:k(e,t,z(U({},a),{eventFilter:o})),pause:l,resume:c,isActive:u}}const Y=I("player",()=>{const e=y(),t=q().$io,i=f(()=>{var r;return(r=e.value)==null?void 0:r.sid}),n=f(()=>{var r;return(r=e.value)==null?void 0:r.mid}),s=f(()=>{var r;return(r=e.value)==null?void 0:r.upgrade}),a=f(()=>{var r;return(r=e.value)==null?void 0:r.attribute}),o=f(()=>{var r;return(r=e.value)==null?void 0:r.equipments});return{sid:i,mids:n,playerInfo:e,getPlayer:async()=>{try{const r=await $fetch("/api/player",{headers:R(["cookie"])});_(e,{...r==null?void 0:r.player,attribute:{...r==null?void 0:r.attribute},mid:{...r==null?void 0:r.mid},upgrade:{...r==null?void 0:r.upgrade},equipments:r.equipments})}catch(r){console.error(r)}},loadPlayer:r=>{_(e,{...r.player,attribute:{...r.attribute},mid:{...r.mid},upgrade:{...r.upgrade},equipments:r.equipments})},fetchPlayer:()=>{t.emit("fetch:player",i.value)},upgrade:s,attribute:a,equipments:o}});export{L as a,J as b,x as c,T as d,v as i,K as n,D as r,_ as s,d as t,Y as u,X as w};

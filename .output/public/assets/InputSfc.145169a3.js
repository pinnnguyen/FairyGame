import{e as j,T as U,o as t,c as A,E as I,l as v,W as o,s as m,B as S,aa as V,t as D,A as h,aq as ne,a5 as K,a0 as f,i as k,j as le,ar as b,as as oe,U as u,ag as se,I as R,X as z,p,an as ie,K as de}from"./entry.303ba4a8.js";import{I as ue}from"./useMessage.4ef409fc.js";var te={errorMessage:{type:String,default:""},extraMessage:{type:String,default:""}},{n:me}=U("form-details"),ve={key:0},fe={key:0};function ge(e,r){return t(),A(V,{name:e.n()},{default:I(()=>[e.errorMessage||e.extraMessage?(t(),v("div",{key:0,class:o(e.n())},[m("div",{class:o(e.n("error-message"))},[S(V,{name:e.n("message")},{default:I(()=>[e.errorMessage?(t(),v("div",ve,D(e.errorMessage),1)):h("v-if",!0)]),_:1},8,["name"])],2),m("div",{class:o(e.n("extra-message"))},[S(V,{name:e.n("message")},{default:I(()=>[e.extraMessage?(t(),v("div",fe,D(e.extraMessage),1)):h("v-if",!0)]),_:1},8,["name"])],2)],2)):h("v-if",!0)]),_:1},8,["name"])}var W=j({name:"VarFormDetails",props:te,setup:()=>({n:me})});W.render=ge;const y=W;y.install=function(e){e.component(y.name,y)};function w(){return w=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var d=arguments[r];for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i])}return e},w.apply(this,arguments)}var pe=Symbol("FORM_BIND_FORM_ITEM_KEY");function he(){var{bindParent:e,parentProvider:r}=ne(pe),d=K(),i=e?M=>{e(w({},M,{instance:d}))}:null;return{bindForm:i,form:r}}function be(e){return["text","password","number"].includes(e)}var ye={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:be},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:f(),onBlur:f(),onClick:f(),onClear:f(),onInput:f(),onChange:f(),"onUpdate:modelValue":f()},{n:T,classes:Ce}=U("input"),Me=["id","disabled","type","value","maxlength","rows"],Fe=["id","disabled","type","value","maxlength"],Be=["for"];function Ie(e,r){var d=R("var-icon"),i=R("var-form-details");return t(),v("div",{class:o(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:r[10]||(r[10]=function(){return e.handleClick&&e.handleClick(...arguments)})},[m("div",{class:o(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:p({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[m("div",{class:o(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[z(e.$slots,"prepend-icon")],2),m("div",{class:o(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(t(),v("input",{key:0,class:o(e.n("autocomplete"))},null,2)):h("v-if",!0),e.textarea?(t(),v("textarea",{key:1,class:o(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:p({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:r[0]||(r[0]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:r[1]||(r[1]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:r[2]||(r[2]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:r[3]||(r[3]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:r[4]||(r[4]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},`
        `,46,Me)):(t(),v("input",{key:2,class:o(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:p({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:r[5]||(r[5]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:r[6]||(r[6]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:r[7]||(r[7]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:r[8]||(r[8]=function(){return e.handleChange&&e.handleChange(...arguments)}),onTouchstart:r[9]||(r[9]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)})},null,46,Fe)),m("label",{class:o(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:p({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},D(e.placeholder),15,Be)],2),m("div",{class:o(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[z(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(t(),A(d,{key:0,class:o(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):h("v-if",!0)])],2)],6),e.line?(t(),v("div",{key:0,class:o(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:p({background:e.errorMessage?void 0:e.blurColor})},[m("div",{class:o(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:p({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):h("v-if",!0),S(i,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}var Y=j({name:"VarInput",components:{VarIcon:ue,VarFormDetails:y},props:ye,setup(e){var r=k("var-input-"+K().uid),d=k(null),i=k(!1),M=le(()=>{var{maxlength:a,modelValue:n}=e;return a?b(n)?"0 / "+a:String(n).length+"/"+a:""}),{bindForm:q,form:s}=he(),{errorMessage:L,validateWithTrigger:X,validate:G,resetValidation:F}=oe(),g=a=>{de(()=>{var{validateTrigger:n,rules:l,modelValue:B}=e;X(n,a,l,B)})},H=()=>{var{hint:a,modelValue:n}=e;if(!a&&!b(n))return T("--placeholder-hidden");if(a&&(!b(n)||i.value))return T("--placeholder-hint")},J=a=>{i.value=!0,u(e.onFocus,a),g("onFocus")},Q=a=>{i.value=!1,u(e.onBlur,a),g("onBlur")},Z=a=>{var n=a.target,{value:l}=n;l=N($(l)),n.value=l,u(e["onUpdate:modelValue"],l),u(e.onInput,l,a),g("onInput")},c=a=>{var n=a.target,{value:l}=n;l=N($(l)),n.value=l,u(e.onChange,l,a),g("onChange")},x=()=>{var{disabled:a,readonly:n,clearable:l,onClear:B}=e;s!=null&&s.disabled.value||s!=null&&s.readonly.value||a||n||!l||(u(e["onUpdate:modelValue"],""),u(B,""),g("onClear"))},_=a=>{var{disabled:n,onClick:l}=e;s!=null&&s.disabled.value||n||(u(l,a),g("onClick"))},$=a=>e.modelModifiers.trim?a.trim():a,N=a=>e.maxlength?a.slice(0,ie(e.maxlength)):a,ee=a=>{var{disabled:n,readonly:l}=e;s!=null&&s.disabled.value||s!=null&&s.readonly.value||n||l||a.stopPropagation()},O=()=>{u(e["onUpdate:modelValue"],""),F()},P=()=>G(e.rules,e.modelValue),E=()=>{var a;(a=d.value)==null||a.focus()},ae=()=>{d.value.blur()},re={reset:O,validate:P,resetValidation:F};return u(q,re),se(()=>{e.autofocus&&E()}),{el:d,id:r,isFocus:i,errorMessage:L,maxlengthText:M,formDisabled:s==null?void 0:s.disabled,formReadonly:s==null?void 0:s.readonly,n:T,classes:Ce,isEmpty:b,computePlaceholderState:H,handleFocus:J,handleBlur:Q,handleInput:Z,handleChange:c,handleClear:x,handleClick:_,handleTouchstart:ee,validate:P,resetValidation:F,reset:O,focus:E,blur:ae}}});Y.render=Ie;const C=Y;C.install=function(e){e.component(C.name,C)};var Te=C;export{Te as _};

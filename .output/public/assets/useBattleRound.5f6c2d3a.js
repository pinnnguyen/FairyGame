import{c as V,s as Q}from"./index.040b5bdf.js";import{i as $,r as U,w as J,a as W,b as z,n as G,t as H,c as K,d as q,s as d}from"./usePlayer.1a998e47.js";import{J as X,i as O,K as Z,w as ee,e as te,L as ne,o as B,l as j,u as L,t as se,A as re,M as ae,r as w,j as oe}from"./entry.937bdf01.js";const Le=["Trang bị ngẫu nhiên từ nhất phẩm đến cửu phẩm thuộc tính tăng cực mạnh","Cường hoá trang bị tăng thuộc tính cực mạnh","Nâng bậc trang bị tăng thuộc tính cực mạnh","Nâng bậc trang bị tăng thuộc tính cực mạnh","Build đá hồn phù hợp giúp thắng dễ dàng trước đối thủ","Boss thế giới sẽ rớt đá hồn","Đấu giá sẽ xuất hiện sau mỗi lần đánh boss","Dương Khai là thí luyện đệ tử, kiêm công việc quét rác tại Lăng Tiêu Các","Dương Khai là thí luyện đệ tử, kiêm công việc quét rác tại Lăng Tiêu Các là ai?"],we={MONSTER:"monster",BOSS_DAILY:"boss_daily",BOSS_FRAME_TIME:"boss_frame_time",BOSS_ELITE:"boss_elite"},De={PLAYER:"player",ENEMY:"enemy"},Pe={PVE:"pve",PVP:"pvp",ARENA_SOLO_PVP:"arena_solo_pvp",BOSS_FRAME_TIME:"boss_frame_time",BOSS_DAILY:"boss_daily",BOSS_ELITE:"boss_elite",DUNGEON:"dungeon"};function ie(e){var n;const t=U(e);return(n=t==null?void 0:t.$el)!=null?n:t}const I=$?window:void 0;function ue(...e){let n,t,r,c;if(z(e[0])||Array.isArray(e[0])?([t,r,c]=e,n=I):[n,t,r,c]=e,!n)return G;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const u=[],m=()=>{u.forEach(f=>f()),u.length=0},y=(f,p,s)=>(f.addEventListener(p,s,c),()=>f.removeEventListener(p,s,c)),b=ee(()=>ie(n),f=>{m(),f&&u.push(...t.flatMap(p=>r.map(s=>y(f,p,s))))},{immediate:!0,flush:"post"}),i=()=>{b(),m()};return H(i),i}const D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P="__vueuse_ssr_handlers__";D[P]=D[P]||{};const le=D[P];function ce(e,n){return le[e]||n}function fe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var pe=Object.defineProperty,C=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,k=(e,n,t)=>n in e?pe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,F=(e,n)=>{for(var t in n||(n={}))de.call(n,t)&&k(e,t,n[t]);if(C)for(var t of C(n))me.call(n,t)&&k(e,t,n[t]);return e};const he={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function _e(e,n,t,r={}){var c;const{flush:u="pre",deep:m=!0,listenToStorageChanges:y=!0,writeDefaults:b=!0,mergeDefaults:i=!1,shallow:f,window:p=I,eventFilter:s,onError:v=a=>{console.error(a)}}=r,S=(f?X:O)(n);if(!t)try{t=ce("getDefaultStorage",()=>{var a;return(a=I)==null?void 0:a.localStorage})()}catch(a){v(a)}if(!t)return S;const h=U(n),N=fe(h),_=(c=r.serializer)!=null?c:he[N],{pause:A,resume:T}=J(S,()=>o(S.value),{flush:u,deep:m,eventFilter:s});return p&&y&&ue(p,"storage",R),R(),S;function o(a){try{if(a==null)t.removeItem(e);else{const l=_.write(a),E=t.getItem(e);E!==l&&(t.setItem(e,l),p&&(p==null||p.dispatchEvent(new StorageEvent("storage",{key:e,oldValue:E,newValue:l,storageArea:t}))))}}catch(l){v(l)}}function g(a){const l=a?a.newValue:t.getItem(e);if(l==null)return b&&h!==null&&t.setItem(e,_.write(h)),h;if(!a&&i){const E=_.read(l);return K(i)?i(E,h):N==="object"&&!Array.isArray(E)?F(F({},h),E):E}else return typeof l!="string"?l:_.read(l)}function R(a){if(!(a&&a.storageArea!==t)){if(a&&a.key==null){S.value=h;return}if(!(a&&a.key!==e)){A();try{S.value=g(a)}catch(l){v(l)}finally{a?Z(T):T()}}}}}function ge(e,n,t={}){const{window:r=I}=t;return _e(e,n,r==null?void 0:r.localStorage,t)}var Y;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Y||(Y={}));var Oe=Object.defineProperty,x=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,M=(e,n,t)=>n in e?Oe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ve=(e,n)=>{for(var t in n||(n={}))ye.call(n,t)&&M(e,t,n[t]);if(x)for(var t of x(n))Se.call(n,t)&&M(e,t,n[t]);return e};const Ee={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ve({linear:W},Ee);const be={class:"text-white flex flex-col items-center justify-center"},Te={key:0,class:"text-12 text-primary font-medium p-1 mb-2 rounded px-4"},Re=te({__name:"Revice",props:{refreshTime:Number},emits:["refreshFinished"],setup(e,{emit:n}){const r=O(e.refreshTime),{pause:c,resume:u}=q(()=>{r.value=r.value-1e3,r.value<=1&&(n("refreshFinished"),c())},1e3);return ne(()=>{u()}),(m,y)=>(B(),j("div",be,[L(r)>0?(B(),j("div",Te," Hồi sinh: "+se(Math.round(L(V)(L(r))))+"s ",1)):re("",!0)]))}}),Be=ae("battleRound",()=>{const e=O(!0),n=O(!1),t=O(0),r=O(),c=O({}),u=O({}),m=O({}),y=O(0),b=ge("speed",1),i=w({skip:!1,stop:!1,TURN_DELAY:oe(()=>2e3/b.value),SHOW_DMG_DELAY:1500,EFFECT_DELAY:500,RESULT_DELAY:1e3}),f=()=>{d(e,!0),d(y,0),d(n,!1),d(t,0),d(r,null),i.skip=!1,i.stop=!1};return{match:c,loading:e,options:i,fn:{startBattle:async(s,v)=>{var S,h,N;if((s==null?void 0:s.statusCode)!==400&&s){if(f(),d(r,s.reward),d(c,s.match),s.inRefresh){d(e,!1),d(n,s.inRefresh),d(t,s.refreshTime);return}for(const _ in s==null?void 0:s.match)Object.assign(u.value,{[_]:{hp:s==null?void 0:s.match[_].attribute.hp}});d(e,!1);for(const _ of s.emulators)for(const A in _){if(i.skip){v();return}if(i.stop)return;const T=A.split("_")[1],o=_[A];if(o.action==="attack"){if(await Q(i.TURN_DELAY),y.value++,Object.assign(m.value,{[T]:{effect:!0,showDamage:!0,damage:(S=o==null?void 0:o.state)==null?void 0:S.damage,critical:(h=o==null?void 0:o.state)==null?void 0:h.critical,bloodsucking:o.state.bloodsucking}}),setTimeout(()=>{m.value[T].effect=!1},i.EFFECT_DELAY),setTimeout(()=>{m.value[T].showDamage=!1},i.TURN_DELAY),o.state.damage){const g=Object.keys(o.state.damage);u.value[g[0]].damage=(N=o==null?void 0:o.state)!=null&&N.critical?`Bạo kích -${o.state.damage[g[0]]}`:`-${o.state.damage[g[0]]}`}if(o.now.hp){const g=Object.keys(o.now.hp);if(u.value[g[0]]&&(u.value[g[0]].hp=o.now.hp[g[0]]),u.value[g[0]].hp<=0){setTimeout(()=>{v()},i.RESULT_DELAY);return}}if(y.value===s.emulators.length*2){setTimeout(()=>{v()},i.RESULT_DELAY);return}}}}},stopBattle:()=>{i.stop=!0},skipBattle:()=>{i.skip=!0}},refresh:w({inRefresh:n,refreshTime:t}),stateRunning:w({receiver:u,realTime:m,reward:r}),speed:b,roundNum:y}});export{De as B,we as T,Re as _,Pe as a,Le as t,Be as u};

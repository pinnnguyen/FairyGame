import{_ as V,a as $}from"./RewardList.vue.90a05acb.js";import{e as A,x as I,f as P,i as h,j as k,ag as G,o as u,l,s as n,u as t,v as c,t as e,A as _,B as f,E as B,G as E}from"./entry.303ba4a8.js";import{_ as O}from"./ButtonSfc.676ad373.js";import{u as j,s as z}from"./usePlayer.4eda164d.js";import{s as F}from"./useMessage.4ef409fc.js";import{T as L}from"./useBattleRound.ae7aabef.js";import{d as W,p as X,t as o}from"./index.040b5bdf.js";import"./index.79c2bd23.js";import"./Line.938dcc9e.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Icon.6e08e514.js";import"./InputSfc.145169a3.js";const Y={pos:"relative",border:"1 white/40 rounded",p:"2",m:"2"},J={text:"center"},K={key:0},Q={key:0},U={key:1,p:"x-1"},Z={key:1},tt={key:0},st={key:1,p:"x-1"},et={flex:"~ "},ot={p:"1"},nt={text:"10"},at={m:"t-2",pos:"absolute",right:"2",top:"[30%]"},vt=A({__name:"Item",props:{boss:null},emits:["war"],setup(a,{emit:q}){var T,w;const r=a;I(j());const C=P("battleRequest"),M=h(!1),R=new Date().getTime(),m=h(((((T=r.boss)==null?void 0:T.startHours)??0)-new Date().getTime())/1e3),d=h(((((w=r.boss)==null?void 0:w.endHours)??0)-R)/1e3),b=k(()=>{var s,i;return W((s=r.boss)==null?void 0:s.startHours,(i=r.boss)==null?void 0:i.endHours)});G(()=>{setInterval(()=>{m.value-=1,d.value-=1},1e3)});const S=async s=>{if(console.log("boss",s),!!s){if(!b.value){F("Thời gian hoạt động chưa mở mời đạo hữu quay lại sau");return}z(C,{id:s._id,target:L.BOSS_FRAME_TIME}),q("war")}},v=k(()=>{var s;if(r.boss)return X(r.boss.level,((s=r.boss)==null?void 0:s.level)+1)});return(s,i)=>{var y,x;const H=V,D=$,N=O;return u(),l("section",Y,[n("div",J,[t(b)?(u(),l("span",Z,[c(" Boss kết thúc: "),t(o)(t(d)).hours>0?(u(),l("span",tt,e(t(o)(t(d)).hours)+"h",1)):_("",!0),t(o)(t(d)).minutes>0?(u(),l("span",st,e(t(o)(t(d)).minutes)+"phút",1)):_("",!0),n("span",null,e(t(o)(t(d)).seconds)+"s",1)])):(u(),l("span",K,[c(" Boss bắt đầu: "),t(o)(t(m)).hours>0?(u(),l("span",Q,e(t(o)(t(m)).hours)+"h",1)):_("",!0),t(o)(t(m)).minutes>0?(u(),l("span",U,e(t(o)(t(m)).minutes)+"phút",1)):_("",!0),n("span",null,e(t(o)(t(m)).seconds)+"s",1)]))]),n("div",et,[n("div",ot,[f(H,{quality:a.boss.quality},{default:B(()=>{var p,g;return[c(e(a.boss.name)+" (",1),n("span",nt,e((p=t(v))==null?void 0:p.levelTitle)+" "+e((g=t(v))==null?void 0:g.floor),1),c(") ")]}),_:1},8,["quality"]),n("div",null,"HP boss: "+e(Math.round(((y=a.boss)==null?void 0:y.attribute.hp)/a.boss.hp*100))+"%",1),f(D,{reward:(x=a.boss)==null?void 0:x.reward},null,8,["reward"])]),n("div",at,[n("i",{text:"underline [#afc671]",m:"r-2",onClick:i[0]||(i[0]=E(p=>M.value=!0,["stop"]))}," Xem thưởng "),f(N,{font:"semibold italic",size:"mini",class:"!text-[#333]",onClick:i[1]||(i[1]=E(p=>S(a.boss),["stop"]))},{default:B(()=>[c(" Diệt tận ")]),_:1})])])])}}});export{vt as default};

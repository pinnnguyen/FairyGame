import{B as q,u as N,T as w,a as E,_ as re}from"./useBattleRound.ae7aabef.js";import{e as I,o,l as r,F as B,q as V,s as t,t as a,u as e,v as _,x as P,a as ie,y as ue,j as G,i as ce,z as de,c as y,A as x,B as l,C as F,D as O,E as S,G as _e,H as j,I as p}from"./entry.303ba4a8.js";import{f as me}from"./index.040b5bdf.js";import{u as pe}from"./usePlayer.4eda164d.js";import{_ as fe}from"./ButtonSfc.676ad373.js";const he=t("span",{class:"text-10 ml-1"}," Bắt đầu chiến đấu ",-1),ve={class:"text-10"},be={class:"text-red-600"},ye=I({__name:"History",props:{battleRounds:null},setup(f){return(g,i)=>(o(),r(B,null,[he,(o(!0),r(B,null,V(f.battleRounds,(s,u)=>(o(),r("div",{key:u,class:"mb-2 border-b border-gray-300 duration-500 text-10"},[t("h3",ve," [Lượt "+a(s.roundNum)+"] ",1),t("strong",null,a(s.turn===e(q).PLAYER?"Bạn":"Muc Tiêu"),1),_(" gây "),t("strong",be,a(s.damage),1),_(" sát thương lên "),t("strong",null,a(s.turn===e(q).PLAYER?"Mục tiêu":"Bạn"),1)]))),128))],64))}}),xe={class:"w-[50%] h-[170px] absolute top-0 overflow-auto bg-[#6879a3] mt-2 mx-2 rounded"},Be=t("p",{class:"text-center text-white text-12 font-semibold"}," Hạng sát thương ",-1),ge={class:"p-2 text-white text-12"},Te=I({__name:"TopDMG",props:{topDMG:null},setup(f){return(g,i)=>(o(),r("div",xe,[Be,t("div",ge,[(o(!0),r(B,null,V(f.topDMG,(s,u)=>(o(),r("div",{key:s._id,class:"flex justify-between mx-1 my-1"},[t("span",null,"("+a(u+1)+") "+a(s==null?void 0:s.name),1),_(),t("span",null,a(e(me)(s.totalDamage)),1)]))),128))])]))}}),Re={class:"h-screen bg-white"},we={class:"h-[54%] relative"},Ee={class:"bg-[#41466e] text-center py-2 text-base font-semibold flex-center"},Se={class:"text-white rounded text-12"},Ie={class:"flex justify-around mt-8"},ke={class:"absolute bottom-0 right-0 py-2"},Ae={class:"relative h-full"},Me={class:"flex items-center flex-col justify-center w-full fixed bottom-2"},$e={class:"flex items-center gap-2"},Pe=I({__name:"[boss]",setup(f){var M;const{loading:g,state:i,receiver:s,realTime:u,battleRounds:Y,battleResult:h,reward:z,refreshTime:H,inRefresh:U,speed:v}=P(N()),{playerInfo:k}=P(pe()),{$io:n}=ie(),m=ue(),{startBattle:X}=N(),K=G(()=>m.query.target),A=G(()=>m.query.id),T=ce([]);let b="";m.query.target===w.BOSS_DAILY&&(b=E.BOSS_DAILY),m.query.target===w.BOSS_FRAME_TIME&&(b=E.BOSS_FRAME_TIME),m.query.target===w.BOSS_ELITE&&(b=E.BOSS_ELITE),n.emit("battle:join",{kind:b,player:{userId:(M=k.value)==null?void 0:M.userId},target:{type:K.value,id:A.value}}),n.on("battle:start",async c=>{await X(c)}),n.emit("battle:log",A.value),n.on("send-battle:log",c=>{T.value=c}),de(()=>{n.off("battle:start"),n.off("send-battle:log")});const J=()=>(h.value.show=!1,j("/")),Q=()=>{h.value.show=!1,n.emit("battle:refresh",{skip:!1})},W=()=>{n.emit("battle:refresh")};return(c,d)=>{var $,C,D;const Z=p("PopupBattleResult"),ee=p("LoadingScreen"),te=p("BattleAttributeInfo"),se=p("BattlePlayerRealtime"),oe=p("BattleEnemyRealtime"),R=fe,ae=ye,ne=Te,le=re;return o(),r(B,null,[e(h).show?(o(),y(Z,{key:0,"battle-result":e(h),reward:e(z),onRetry:Q,onClose:J},null,8,["battle-result","reward"])):x("",!0),e(g)?(o(),y(ee,{key:1})):x("",!0),t("div",Re,[t("div",we,[t("div",Ee,[t("span",Se," ["+a((C=($=e(i))==null?void 0:$.enemy)==null?void 0:C.name)+" Map "+a((D=e(k))==null?void 0:D.midId)+"] ",1)]),l(te,{state:e(i)},null,8,["state"]),t("div",Ie,[l(se,{state:e(i),receiver:e(s),"real-time":e(u)},null,8,["state","receiver","real-time"]),l(oe,{state:e(i),receiver:e(s),"real-time":e(u)},null,8,["state","receiver","real-time"])]),t("div",ke,[F(l(R,{outline:"",size:"small",class:"rounded mr-2 text-base font-semibold",onClick:d[0]||(d[0]=L=>v.value=2)},{default:S(()=>[_(" X1 ")]),_:1},512),[[O,e(v)===1]]),F(l(R,{outline:"",size:"small",class:"rounded mr-2 text-base font-semibold",onClick:d[1]||(d[1]=L=>v.value=1)},{default:S(()=>[_(" X2 ")]),_:1},512),[[O,e(v)===2]])])]),t("div",Ae,[l(ae,{"battle-rounds":e(Y)},null,8,["battle-rounds"]),e(T)?(o(),y(ne,{key:0,"top-d-m-g":e(T)},null,8,["top-d-m-g"])):x("",!0),t("div",Me,[e(U)?(o(),y(le,{key:0,"refresh-time":e(H),onRefreshFinished:W},null,8,["refresh-time"])):x("",!0),t("div",$e,[l(R,{class:"w-[80px] uppercase font-medium",size:"small",type:"default",onClick:d[2]||(d[2]=_e(L=>("navigateTo"in c?c.navigateTo:e(j))("/"),["stop"]))},{default:S(()=>[_(" Về thành ")]),_:1})])])])])],64)}}});export{Pe as default};

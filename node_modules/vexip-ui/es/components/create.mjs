import { computed, unref } from "vue";
import "../common/config/src/index.mjs";
import { toCapitalCase } from "@vexip-ui/utils";
import { configNamespace } from "../common/config/src/namespace.mjs";
import { configProps } from "../common/config/src/props.mjs";
import { configLocale } from "../common/config/src/locale/index.mjs";
import { configZIndex } from "../common/config/src/z-index.mjs";
function buildInstall(components = [], defaultLocale) {
  return function install(app, options = {}) {
    const {
      prefix = "",
      namespace = "",
      props = {},
      locale = { locale: defaultLocale },
      zIndex
    } = options;
    const withDefaultLocale = computed(() => {
      return { locale: defaultLocale, ...unref(locale) };
    });
    configNamespace(namespace, app);
    configProps(props, app);
    configLocale(withDefaultLocale, app);
    if (typeof zIndex === "number") {
      configZIndex(zIndex, app);
    }
    const normalizedPrefix = toCapitalCase(prefix || "");
    components.forEach((component) => {
      if (typeof component === "function" || typeof component.install === "function") {
        app.use(component);
      } else {
        app.component(`${normalizedPrefix}${component.name}`, component);
      }
    });
  };
}
export { buildInstall };

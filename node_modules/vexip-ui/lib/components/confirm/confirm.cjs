"use strict";var e=require("vue");require("../button/index.cjs");require("../icon/index.cjs");require("../modal/index.cjs");require("../renderer/index.cjs");require("../../common/config/src/index.cjs");var r=require("@vexip-ui/utils"),Q=require("@vexip-ui/icons"),K=require("./props.cjs"),U=require("../../_virtual/plugin-vue_export-helper.cjs"),W=require("../button/button.cjs"),Y=require("../icon/icon.cjs"),Z=require("../modal/modal.cjs"),x=require("../renderer/renderer.cjs"),_=require("../../common/config/src/props.cjs"),ee=require("../../common/config/src/namespace.cjs"),ne=require("../../common/config/src/locale/index.cjs");const N=n=>n==="auto"||!Number.isNaN(parseFloat(n)),le=Object.freeze(["default","primary","info","success","warning","error"]),oe=e.defineComponent({name:"Confirm",components:{Button:W,Icon:Y,Modal:Z,Renderer:x,Xmark:Q.Xmark},props:K.confirmProps,setup(n){const l=_.useProps("confirm",n,{top:{default:"auto",validator:N},left:{default:"auto",validator:N},width:{default:420,validator:N},maskClose:!1,confirmType:{default:"default",validator:o=>le.includes(o)},confirmText:null,cancelText:null,icon:null,className:null,style:null,renderer:{default:null,isFunc:!0,static:!0},iconColor:"",closable:!1,parseHtml:!1,contentAlign:"center",actionsAlign:"center"}),t=e.ref(!1),d=e.ref(!1),p=e.ref(""),C=e.ref(""),i=e.ref(l.iconColor),c=e.ref(l.className),a=e.ref(l.style||{}),u=e.ref(l.confirmType),f=e.ref(l.confirmText),s=e.ref(l.cancelText),y=e.ref(l.maskClose),h=e.ref(l.parseHtml),R=e.ref(l.closable),g=e.ref(l.contentAlign),T=e.ref(l.actionsAlign),B=e.ref(l.icon),m=e.ref(l.renderer),v=e.ref(null),k=e.ref(null),b=e.ref(null),O=new Promise(o=>{e.onMounted(()=>{e.nextTick(o)})});async function G(o){return await O,await new Promise(V=>{var j,z,A,F,H,E,M,S,$,P,D,X,I,L;p.value=(j=o.title)!=null?j:"",C.value=(z=o.content)!=null?z:"",c.value=(A=o.className)!=null?A:l.className,a.value=(F=o.style)!=null?F:l.style,i.value=(H=o.iconColor)!=null?H:l.iconColor,y.value=(E=o.maskClose)!=null?E:l.maskClose,u.value=(M=o.confirmType)!=null?M:l.confirmType,f.value=(S=o.confirmText)!=null?S:l.confirmText,s.value=($=o.cancelText)!=null?$:l.cancelText,h.value=(P=o.parseHtml)!=null?P:l.parseHtml,R.value=(D=o.closable)!=null?D:l.closable,g.value=(X=o.contentAlign)!=null?X:l.contentAlign,T.value=(I=o.actionsAlign)!=null?I:l.actionsAlign,B.value=(L=o.icon)!=null?L:l.icon,m.value=r.isFunction(o.renderer)?o.renderer:l.renderer,v.value=r.isFunction(o.onBeforeConfirm)?o.onBeforeConfirm:null,r.isFunction(m.value)&&(m.value=()=>m.value(o,w,q)),t.value=!0,k.value=()=>{V(!0),v.value=null},b.value=()=>{V(!1),v.value=null}})}async function w(){if(d.value=!0,r.isFunction(v.value)){let o=v.value();if(r.isPromise(o)&&(o=await o),o===!1){d.value=!1;return}}t.value=!1,d.value=!1,r.isFunction(k.value)&&(k.value(),k.value=null)}function q(){t.value=!1,r.isFunction(b.value)&&(b.value(),b.value=null)}function J(){t.value=!1,p.value="",C.value="",i.value=l.iconColor,c.value=l.className,a.value=l.style,y.value=l.maskClose,u.value=l.confirmType,f.value=l.confirmText,s.value=l.cancelText,h.value=l.parseHtml,R.value=l.closable,g.value=l.contentAlign,T.value=l.actionsAlign,B.value=l.icon,m.value=l.renderer}return{CircleQuestion:Q.CircleQuestion,props:l,nh:ee.useNameHelper("confirm"),locale:ne.useLocale("confirm"),visible:t,loading:d,title:p,content:C,classR:c,styleR:a,iconColorR:i,maskCloseR:y,confirmTypeR:u,confirmTextR:f,cancelTextR:s,parseHtmlR:h,closableR:R,contentAlignR:g,actionsAlignR:T,iconR:B,rendererR:m,isFunction:r.isFunction,openConfirm:G,handleConfirm:w,handleCancel:q,handleReset:J}}}),re=["innerHTML"];function ae(n,l,t,d,p,C){const i=e.resolveComponent("Renderer"),c=e.resolveComponent("Xmark"),a=e.resolveComponent("Icon"),u=e.resolveComponent("Button"),f=e.resolveComponent("Modal");return e.openBlock(),e.createBlock(f,{"no-footer":"",closable:!1,active:n.visible,class:e.normalizeClass([n.nh.b(),n.nh.bs("vars")]),"modal-class":n.classR,"modal-style":n.styleR,top:n.props.top,left:n.props.left,width:n.props.width,"mask-close":n.maskCloseR,onHide:n.handleReset},{default:e.withCtx(()=>[n.isFunction(n.rendererR)?(e.openBlock(),e.createBlock(i,{key:0,renderer:n.rendererR},null,8,["renderer"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[n.title?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("header"))},[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("title"))},e.toDisplayString(n.title),3),n.closableR?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(n.nh.be("close")),onMousedown:l[0]||(l[0]=e.withModifiers(()=>{},["stop"])),onClick:l[1]||(l[1]=(...s)=>n.handleCancel&&n.handleCancel(...s))},[e.renderSlot(n.$slots,"close",{},()=>[e.createVNode(a,{scale:1.2,label:"close"},{default:e.withCtx(()=>[e.createVNode(c)]),_:1},8,["scale"])])],34)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("body"),n.nh.bem("body",n.contentAlignR),n.title&&n.nh.bem("body","with-title")])},[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("icon"))},[n.isFunction(n.icon)?(e.openBlock(),e.createBlock(i,{key:0,renderer:n.icon},null,8,["renderer"])):(e.openBlock(),e.createBlock(a,{key:1,icon:n.iconR||n.CircleQuestion,scale:2.2,style:e.normalizeStyle({color:n.iconColorR})},null,8,["icon","scale","style"]))],2),n.parseHtmlR?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("content")),innerHTML:n.content},null,10,re)):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("content"))},e.toDisplayString(n.content),3))],2),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("footer"),n.nh.bem("footer",n.actionsAlignR)])},[e.createVNode(u,{class:e.normalizeClass(n.nh.be("button")),inherit:"","no-pulse":"",onClick:n.handleCancel},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.cancelTextR||n.locale.cancel),1)]),_:1},8,["class","onClick"]),e.createVNode(u,{class:e.normalizeClass(n.nh.be("button")),inherit:"","no-pulse":"",type:n.confirmTypeR,loading:n.loading,onClick:n.handleConfirm},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.confirmTextR||n.locale.confirm),1)]),_:1},8,["class","type","loading","onClick"])],2),n.closableR&&!n.title?(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(n.nh.be("close")),onMousedown:l[2]||(l[2]=e.withModifiers(()=>{},["stop"])),onClick:l[3]||(l[3]=(...s)=>n.handleCancel&&n.handleCancel(...s))},[e.renderSlot(n.$slots,"close",{},()=>[e.createVNode(a,{scale:1.2,label:"close"},{default:e.withCtx(()=>[e.createVNode(c)]),_:1},8,["scale"])])],34)):e.createCommentVNode("",!0)],64))]),_:3},8,["active","class","modal-class","modal-style","top","left","width","mask-close","onHide"])}var se=U(oe,[["render",ae]]);module.exports=se;

"use strict";var r=require("vue");require("../../common/config/src/index.cjs");var f=require("@vexip-ui/hooks"),h=require("@vexip-ui/utils"),y=require("../../_virtual/plugin-vue_export-helper.cjs"),$=require("../../common/config/src/namespace.cjs");const C=r.defineComponent({name:"ColorAlpha",props:{rgb:{type:Object,default:()=>({r:0,g:0,b:0}),validator:e=>"r"in e&&"g"in e&&"b"in e},alpha:{type:Number,default:1,validator:e=>e>=0&&e<=1}},emits:["edit-start","edit-end","change"],setup(e,{emit:i}){const t=r.ref(e.alpha*100);let o=t.value,c,p;const{target:s}=f.useModifier({passive:!1,onKeyDown:(a,n)=>{if(n.left||n.right){a.preventDefault();const g=(a.ctrlKey?10:a.altKey?.5:2)*(n.left?-1:1);t.value+=g,l(),o=t.value,d()}}}),{moving:m}=f.useMoving({target:s,onStart:(a,n)=>{if(!s.value||n.button>0)return!1;const u=s.value.getBoundingClientRect(),{left:g,width:v}=u;c=v,t.value=(p=a.clientX-g)/v*100,l(),i("edit-start"),Math.abs(t.value-o)>=.01&&(o=t.value,d())},onMove:a=>{t.value=(p+a.deltaX)/c*100,l(),d()},onEnd:()=>{i("edit-end")}}),b=r.computed(()=>{const{r:a,g:n,b:u}=e.rgb;return`${a}, ${n}, ${u}`});l(),r.watch(()=>e.alpha,a=>{t.value=a*100,l()},{immediate:!0});function l(){t.value=h.toFixed(h.boundRange(t.value,0,100),3)}function d(){i("change",t.value/100)}return{nh:$.useNameHelper("color-picker"),currentLeft:t,editing:m,rgbString:b,wrapper:s}}});function S(e,i,t,o,c,p){return r.openBlock(),r.createElementBlock("div",{ref:"wrapper",class:r.normalizeClass(e.nh.be("alpha")),tabindex:"-1"},[r.createElementVNode("div",{class:r.normalizeClass(e.nh.be("opacity")),style:r.normalizeStyle({backgroundImage:`linear-gradient(to right, rgba(${e.rgbString}, 0) 0%, rgb(${e.rgbString}) 100%)`})},null,6),r.createElementVNode("div",{class:r.normalizeClass(e.nh.be("alpha-handler")),style:r.normalizeStyle({left:`${e.currentLeft}%`})},null,6)],2)}var k=y(C,[["render",S]]);module.exports=k;

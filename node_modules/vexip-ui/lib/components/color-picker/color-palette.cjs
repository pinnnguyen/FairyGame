"use strict";var t=require("vue");require("../../common/config/src/index.cjs");var z=require("@vexip-ui/hooks"),o=require("@vexip-ui/utils"),k=require("../../_virtual/plugin-vue_export-helper.cjs"),q=require("../../common/config/src/namespace.cjs");const E=t.defineComponent({name:"ColorPalette",props:{hue:{type:Number,default:0,validator:e=>e>=0&&e<=360},value:{type:Number,default:1,validator:e=>e>=0&&e<=1},saturation:{type:Number,default:0,validator:e=>e>=0&&e<=1}},emits:["edit-start","edit-end","change"],setup(e,{emit:i}){const a=t.ref((1-e.value)*100),l=t.ref(e.saturation*100);let s=a.value,v=l.value,g,b,y,C;const{target:c}=z.useModifier({passive:!1,onKeyDown:(n,r)=>{if(r.up||r.down||r.left||r.right){n.preventDefault();const h=n.ctrlKey?10:n.altKey?.5:2,f=r.up||r.left?-1:1,d=h*f;r.up||r.down?a.value+=d:l.value+=d,u(),s=a.value,v=l.value,p()}}}),{moving:$}=z.useMoving({target:c,onStart:(n,r)=>{if(!c.value||r.button>0)return!1;const h=c.value.getBoundingClientRect(),{top:f,left:d,width:w,height:N}=h;g=w,b=N,a.value=(y=n.clientY-f)/N*100,l.value=(C=n.clientX-d)/w*100,u(),i("edit-start");let m=!1;Math.abs(a.value-s)>=.01&&(s=a.value,m=!0),Math.abs(l.value-v)>=.01&&(v=l.value,m=!0),m&&p()},onMove:n=>{a.value=(y+n.deltaY)/b*100,l.value=(C+n.deltaX)/g*100,u(),p()},onEnd:()=>{i("edit-end")}});t.watch(()=>e.value,n=>{a.value=(1-n)*100,u()},{immediate:!0}),t.watch(()=>e.saturation,n=>{l.value=n*100,u()},{immediate:!0});function u(){a.value=o.toFixed(o.boundRange(a.value,0,100),3),l.value=o.toFixed(o.boundRange(l.value,0,100),3)}function p(){i("change",{h:e.hue,s:l.value/100,v:o.toFixed(1-a.value/100,3)})}return{nh:q.useNameHelper("color-picker"),currentTop:a,currentLeft:l,editing:$,wrapper:c}}});function L(e,i,a,l,s,v){return t.openBlock(),t.createElementBlock("div",{ref:"wrapper",class:t.normalizeClass(e.nh.be("palette")),tabindex:"-1",style:t.normalizeStyle({backgroundColor:`hsl(${e.hue}, 100%, 50%)`})},[t.createElementVNode("div",{class:t.normalizeClass(e.nh.be("saturation"))},null,2),t.createElementVNode("div",{class:t.normalizeClass(e.nh.be("value"))},null,2),t.createElementVNode("div",{class:t.normalizeClass(e.nh.be("palette-handler")),style:t.normalizeStyle({top:`${e.currentTop}%`,left:`${e.currentLeft}%`})},[t.createElementVNode("div",{class:t.normalizeClass(e.nh.be("palette-pointer"))},null,2)],6)],6)}var M=k(E,[["render",L]]);module.exports=M;

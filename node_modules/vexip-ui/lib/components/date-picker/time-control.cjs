"use strict";var e=require("vue");require("../../common/config/src/index.cjs");var f=require("@vexip-ui/utils"),y=require("./helper.cjs"),k=require("../../_virtual/plugin-vue_export-helper.cjs"),h=require("../../common/config/src/namespace.cjs");const v=e.defineComponent({name:"TimeControl",props:{unitType:{type:String,default:"hour"},enabled:{type:Object,default:()=>({})},activated:{type:Object,default:()=>({})},timeValue:{type:Object,default:()=>({})},separator:{type:String,default:":"},visible:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},filler:{type:String,default:"-",validator:n=>n.length===1},noFiller:{type:Boolean,default:!1},steps:{type:Array,default:()=>[1,1,1]},ctrlSteps:{type:Array,default:()=>[5,5,5]},labels:{type:Object,default:()=>({})},hasError:{type:Boolean,default:!1}},emits:["input","plus","minus","enter","cancel","unit-focus","unit-blur","prev-unit","next-unit"],setup(n,{emit:l}){const s=h.useNameHelper("time-picker"),o=e.ref(),i=e.computed(()=>u("hour")),d=e.computed(()=>u("minute")),r=e.computed(()=>u("second"));e.watch(()=>n.unitType,(t,a)=>{a&&l("unit-blur",a)});function u(t){return n.noFiller||n.activated[t]?f.doubleDigits(n.timeValue[t]):`${n.filler}${n.filler}`}function p(t){l("unit-focus",t)}function m(t){if(!n.visible)return;const a=y.handleKeyEnter(t);switch(a){case"next":{l("next-unit");break}case"prev":{l("prev-unit");break}case"up":{l("minus",t.ctrlKey);break}case"down":{l("plus",t.ctrlKey);break}case"ok":{c();break}case"esc":{b();break}default:typeof a=="number"&&l("input",a)}}function c(){l("enter")}function b(){l("cancel")}return{nh:s,formattedHour:i,formattedMinute:d,formattedSecond:r,wrapper:o,handleInputFocus:p,handleInput:m,focus:()=>{var t;(t=o.value)==null||t.focus()},blur:()=>{var t;(t=o.value)==null||t.blur()}}}});function C(n,l,s,o,i,d){return e.openBlock(),e.createElementBlock("div",{ref:"wrapper",class:e.normalizeClass([n.nh.be("input"),n.hasError&&n.nh.bem("input","error")]),tabindex:"-1",onKeydown:l[3]||(l[3]=(...r)=>n.handleInput&&n.handleInput(...r))},[n.enabled.hour?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="hour"&&n.nh.bem("unit","focused")]),onClick:l[0]||(l[0]=r=>n.handleInputFocus("hour"))},e.toDisplayString(n.formattedHour),3)):e.createCommentVNode("",!0),n.labels.hour?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.hour),3)):e.createCommentVNode("",!0),n.enabled.minute?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[n.enabled.hour?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("separator"))},e.toDisplayString(n.separator),3)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="minute"&&n.nh.bem("unit","focused")]),onClick:l[1]||(l[1]=r=>n.handleInputFocus("minute"))},e.toDisplayString(n.formattedMinute),3),n.labels.minute?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.minute),3)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),n.enabled.second?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[n.enabled.minute||n.enabled.hour?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("separator"))},e.toDisplayString(n.separator),3)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="second"&&n.nh.bem("unit","focused")]),onClick:l[2]||(l[2]=r=>n.handleInputFocus("second"))},e.toDisplayString(n.formattedSecond),3),n.labels.second?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.second),3)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0)],34)}var B=k(v,[["render",C]]);module.exports=B;

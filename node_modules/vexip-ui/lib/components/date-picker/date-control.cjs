"use strict";var e=require("vue");require("../../common/config/src/index.cjs");var C=require("@vexip-ui/utils"),B=require("./helper.cjs"),g=require("../../_virtual/plugin-vue_export-helper.cjs"),S=require("../../common/config/src/namespace.cjs");const V=e.defineComponent({name:"DateControl",props:{unitType:{type:String,default:"date"},enabled:{type:Object,default:()=>({})},activated:{type:Object,default:()=>({})},dateValue:{type:Object,default:()=>({})},dateSeparator:{type:String,default:"/"},timeSeparator:{type:String,default:":"},visible:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},filler:{type:String,default:"-",validator:n=>n.length===1},noFiller:{type:Boolean,default:!1},steps:{type:Array,default:()=>[1,1,1]},ctrlSteps:{type:Array,default:()=>[5,5,5]},labels:{type:Object,default:()=>({})},hasError:{type:Boolean,default:!1}},emits:["input","plus","minus","enter","cancel","unit-focus","prev-unit","next-unit"],setup(n,{emit:a}){const s=S.useNameHelper("date-picker"),i=e.ref(),d=e.computed(()=>Object.keys(n.enabled).every(t=>!n.enabled[t]||n.activated[t])),m=e.computed(()=>({[s.be("input")]:!0,[s.bem("input","activated")]:d.value,[s.bem("input","error")]:n.hasError})),l=e.computed(()=>n.enabled.hour||n.enabled.minute||n.enabled.second),p=e.computed(()=>o("year")),c=e.computed(()=>o("month")),b=e.computed(()=>o("date")),y=e.computed(()=>o("hour")),k=e.computed(()=>o("minute")),f=e.computed(()=>o("second"));function o(t){const r=t==="year",u=n.filler;return n.noFiller||n.activated[t]?r?n.dateValue.year.toString().padStart(4,"0"):C.doubleDigits(n.dateValue[t]):`${r?`${u}${u}`:""}${u}${u}`}function v(t){a("unit-focus",t)}function h(t){if(!n.visible)return;const r=B.handleKeyEnter(t);switch(r){case"next":{a("next-unit");break}case"prev":{a("prev-unit");break}case"up":{a("minus",t.ctrlKey);break}case"down":{a("plus",t.ctrlKey);break}case"ok":{a("enter");break}case"esc":{a("cancel");break}default:typeof r=="number"&&a("input",r)}}return{nh:s,className:m,showTimeUnits:l,formattedYear:p,formattedMonth:c,formattedDate:b,formattedHour:y,formattedMinute:k,formattedSecond:f,wrapper:i,handleInputFocus:v,handleInput:h,focus:()=>{var t;(t=i.value)==null||t.focus()},blur:()=>{var t;(t=i.value)==null||t.blur()}}}});function E(n,a,s,i,d,m){return e.openBlock(),e.createElementBlock("div",{ref:"wrapper",class:e.normalizeClass(n.className),tabindex:"-1",onKeydown:a[6]||(a[6]=(...l)=>n.handleInput&&n.handleInput(...l))},[n.enabled.year?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="year"&&n.nh.bem("unit","focused")]),onClick:a[0]||(a[0]=l=>n.handleInputFocus("year"))},e.toDisplayString(n.formattedYear),3)):e.createCommentVNode("",!0),n.labels.year?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.year),3)):e.createCommentVNode("",!0),n.enabled.month?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[n.enabled.year?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("separator"))},e.toDisplayString(n.dateSeparator),3)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="month"&&n.nh.bem("unit","focused")]),onClick:a[1]||(a[1]=l=>n.handleInputFocus("month"))},e.toDisplayString(n.formattedMonth),3),n.labels.month?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.month),3)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),n.enabled.date?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[n.enabled.month||n.enabled.year?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("separator"))},e.toDisplayString(n.dateSeparator),3)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="date"&&n.nh.bem("unit","focused")]),onClick:a[2]||(a[2]=l=>n.handleInputFocus("date"))},e.toDisplayString(n.formattedDate),3),n.labels.date?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.date),3)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),n.showTimeUnits?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("pad"))},null,2),n.enabled.hour?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="hour"&&n.nh.bem("unit","focused")]),onClick:a[3]||(a[3]=l=>n.handleInputFocus("hour"))},e.toDisplayString(n.formattedHour),3)):e.createCommentVNode("",!0),n.labels.hour?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.hour),3)):e.createCommentVNode("",!0),n.enabled.minute?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[n.enabled.hour?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("separator"))},e.toDisplayString(n.timeSeparator),3)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="minute"&&n.nh.bem("unit","focused")]),onClick:a[4]||(a[4]=l=>n.handleInputFocus("minute"))},e.toDisplayString(n.formattedMinute),3),n.labels.minute?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.minute),3)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),n.enabled.second?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[n.enabled.minute||n.enabled.hour?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("separator"))},e.toDisplayString(n.timeSeparator),3)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("unit"),n.visible&&n.unitType==="second"&&n.nh.bem("unit","focused")]),onClick:a[5]||(a[5]=l=>n.handleInputFocus("second"))},e.toDisplayString(n.formattedSecond),3),n.labels.second?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(n.nh.be("label"))},e.toDisplayString(n.labels.second),3)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0)],34)}var N=g(V,[["render",E]]);module.exports=N;

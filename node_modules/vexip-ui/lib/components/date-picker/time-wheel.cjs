"use strict";var n=require("vue");require("../wheel/index.cjs");require("../../common/config/src/index.cjs");var l=require("@vexip-ui/utils"),C=require("../../_virtual/plugin-vue_export-helper.cjs"),D=require("../wheel/wheel.cjs"),S=require("../../common/config/src/namespace.cjs");const W=n.defineComponent({name:"TimeWheel",components:{Wheel:D},props:{noArrow:{type:Boolean,default:!1},hour:{type:Number,default:0,validator:e=>e>=0&&e<=23},minute:{type:Number,default:0,validator:e=>e>=0&&e<=59},second:{type:Number,default:0,validator:e=>e>=0&&e<=59},candidate:{default:2,validator:e=>[0,1,2,3].includes(e)},steps:{type:Array,default:()=>[1,1,1],validator:e=>{if(e[0]&&24%e[0]!==0)return!1;for(let o=1;o<3;++o)if(e[o]&&60%e[o]!==0)return!1;return!0}},pointer:{type:Boolean,default:l.USE_TOUCH},disabledTime:{type:Object,default:()=>({})}},emits:["change","toggle-col","update:hour","update:minute","update:second"],setup(e,{emit:o}){const i=n.ref(e.hour),u=n.ref(e.minute),d=n.ref(e.second),s=n.ref([]),a=n.ref([]),r=n.ref([]),m=n.ref(),f=n.ref(),p=n.ref();n.watch(()=>e.steps,w,{immediate:!0}),n.watch(()=>e.hour,t=>{i.value=t}),n.watch(()=>e.minute,t=>{u.value=t}),n.watch(()=>e.second,t=>{d.value=t}),n.watch(i,t=>{o("update:hour",t),o("change","hour",t)}),n.watch(u,t=>{o("update:minute",t),o("change","minute",t)}),n.watch(d,t=>{o("update:second",t),o("change","second",t)});function v(t){return typeof e.disabledTime.hour=="function"&&e.disabledTime.hour(t)}function b(t){return typeof e.disabledTime.minute=="function"&&e.disabledTime.minute(i.value,t)}function c(t){return typeof e.disabledTime.second=="function"&&e.disabledTime.second(i.value,u.value,t)}function w(){const[t=1,h=1,g=1]=e.steps;s.value=l.range(24/t,0,t),a.value=l.range(60/h,0,h),r.value=l.range(60/g,0,g)}function T(t){o("toggle-col",t)}function y(){[m.value,f.value,p.value].forEach(t=>{t==null||t.refreshScroll()})}return{nh:S.useNameHelper("time-picker"),currentHour:i,currentMinute:u,currentSecond:d,hourRange:s,minuteRange:a,secondRange:r,hourWheel:m,minuteWheel:f,secondWheel:p,doubleDigits:l.doubleDigits,isHourDisabled:v,isMinuteDisabled:b,isSecondDisabled:c,handleToggleColumn:T,refreshWheel:y}}});function M(e,o,i,u,d,s){const a=n.resolveComponent("Wheel");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(e.nh.be("wheel"))},[n.createVNode(a,{ref:"hourWheel",value:e.currentHour,"onUpdate:value":o[0]||(o[0]=r=>e.currentHour=r),inherit:"",pointer:e.pointer,arrow:!e.noArrow,candidate:e.candidate,options:e.hourRange,tabindex:"-1",onMouseenter:o[1]||(o[1]=r=>e.handleToggleColumn("hour")),onTouchstart:o[2]||(o[2]=r=>e.handleToggleColumn("hour")),onKeydown:o[3]||(o[3]=n.withModifiers(()=>{},["stop"]))},{default:n.withCtx(({option:r})=>[n.createElementVNode("span",{class:n.normalizeClass([e.nh.be("option"),e.isHourDisabled(r.value)&&e.nh.bem("option","disabled")])},n.toDisplayString(e.doubleDigits(r.value)),3)]),_:1},8,["value","pointer","arrow","candidate","options"]),n.createVNode(a,{ref:"minuteWheel",value:e.currentMinute,"onUpdate:value":o[4]||(o[4]=r=>e.currentMinute=r),inherit:"",pointer:e.pointer,arrow:!e.noArrow,candidate:e.candidate,options:e.minuteRange,tabindex:"-1",onMouseenter:o[5]||(o[5]=r=>e.handleToggleColumn("minute")),onTouchstart:o[6]||(o[6]=r=>e.handleToggleColumn("minute")),onKeydown:o[7]||(o[7]=n.withModifiers(()=>{},["stop"]))},{default:n.withCtx(({option:r})=>[n.createElementVNode("span",{class:n.normalizeClass([e.nh.be("option"),e.isMinuteDisabled(r.value)&&e.nh.bem("option","disabled")])},n.toDisplayString(e.doubleDigits(r.value)),3)]),_:1},8,["value","pointer","arrow","candidate","options"]),n.createVNode(a,{ref:"secondWheel",value:e.currentSecond,"onUpdate:value":o[8]||(o[8]=r=>e.currentSecond=r),inherit:"",pointer:e.pointer,arrow:!e.noArrow,candidate:e.candidate,options:e.secondRange,tabindex:"-1",onMouseenter:o[9]||(o[9]=r=>e.handleToggleColumn("second")),onTouchstart:o[10]||(o[10]=r=>e.handleToggleColumn("second")),onKeydown:o[11]||(o[11]=n.withModifiers(()=>{},["stop"]))},{default:n.withCtx(({option:r})=>[n.createElementVNode("span",{class:n.normalizeClass([e.nh.be("option"),e.isSecondDisabled(r.value)&&e.nh.bem("option","disabled")])},n.toDisplayString(e.doubleDigits(r.value)),3)]),_:1},8,["value","pointer","arrow","candidate","options"])],2)}var N=C(W,[["render",M]]);module.exports=N;

"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var m=require("vue"),C=require("./message.cjs"),r=require("@vexip-ui/utils"),o=require("@vexip-ui/icons");const y={info:{icon:o.CircleInfo},success:{icon:o.CircleCheck},warning:{icon:o.CircleExclamation},error:{icon:o.CircleXmark}},p=["top","bottom"];let b=1;function M(){return`message-${b++}`}class c{constructor(e={}){e={...e,duration:e.duration?r.toNumber(e.duration):3e3},this._instance=null,this._innerApp=null,this._container=null,this.name="Message",this.defaults={},this.config(e),this.open=(t,n)=>this._open(null,t,n),this.info=(t,n)=>this._open("info",t,n),this.success=(t,n)=>this._open("success",t,n),this.warning=(t,n)=>this._open("warning",t,n),this.error=(t,n)=>this._open("error",t,n)}judge(e,t,n,s){e?this.success(t,s):this.error(n,s)}close(e){r.isNull(e)?this.clear():this._getInstance().remove(e)}config({placement:e,...t}){e&&(this._getInstance().placement=p.includes(e)?e:p[0]),this.defaults={...this.defaults,...t}}clone(){return new c(this.defaults)}clear(){this._getInstance().clear()}destroy(){var e;(e=this._innerApp)==null||e.unmount(),r.destroyObject(this)}isDestroyed(){return!1}install(e,t={}){const{property:n,...s}=t;this.config(s),e.config.globalProperties[n||"$message"]=this}_getInstance(){return this._instance||(this._container=document.createElement("div"),this._innerApp=m.createApp(C),this._instance=this._innerApp.mount(this._container),document.body.appendChild(this._container.firstElementChild)),this._instance}_open(e,t,n){var g,d;if(!r.isClient)return r.noop;const s=typeof t=="string"?{content:t,duration:n}:t,u=(g=s.key)!=null?g:M(),a=this._getInstance(),_=e?(d=y[e])!=null?d:{}:{};let l;const h=s.onClose,v=()=>{if(clearTimeout(l),typeof h=="function")return h()},i=Object.assign({},this.defaults,_,s,{key:u,type:e,onClose:v});i.icon&&typeof i.icon!="function"&&(i.icon=m.markRaw(i.icon)),a.add(i);const f=typeof i.duration=="number"?i.duration:3e3;return f>=500&&(l=setTimeout(()=>{a.remove(u)},f)),()=>{clearTimeout(l),a.remove(u)}}}const w=new c;exports.Message=w;exports.MessageManager=c;

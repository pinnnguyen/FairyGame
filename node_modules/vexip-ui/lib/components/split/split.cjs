"use strict";var e=require("vue");require("../icon/index.cjs");require("../../common/config/src/index.cjs");var T=require("@vexip-ui/hooks"),b=require("@vexip-ui/icons"),j=require("./props.cjs"),B=require("../../_virtual/plugin-vue_export-helper.cjs"),I=require("../icon/icon.cjs"),m=require("../../common/config/src/props.cjs"),L=require("../../common/config/src/namespace.cjs");const H=e.defineComponent({name:"Split",components:{Icon:I},props:j.splitProps,emits:["update:value"],setup(n,{emit:a}){const t=m.useProps("split",n,{value:{default:.5,validator:l=>l>0&&l<1,static:!0},min:.1,max:.9,vertical:!1,noTransition:!1,lazy:!1,canFull:!1}),i=L.useNameHelper("split"),o=e.ref(t.value),r=e.ref(0),f=e.ref(!1),v=e.ref(),s=e.ref(),{target:E,moving:$}=T.useMoving({lazy:!0,capture:!1,onStart:(l,u)=>{if(r.value||!v.value||u.button>0)return!1;const{min:d,max:h,vertical:z,lazy:g}=t,c=v.value[S.value],q=d<=1?d:d/c,P=h<=1?h:h/c;l.outer=c,l.min=q,l.max=P,l.vertical=z,l.splitLazy=g,l.start=o.value*c,l.target=o.value,g&&s.value&&(s.value.style[p.value[0]]=`${o.value*100}`,s.value.style.display="block"),m.emitEvent(t.onMoveStart,o.value)},onMove:l=>{const u=l.outer,d=l.min,h=l.max,z=l.vertical?l.deltaY:l.deltaX,g=l.start,c=Math.min(Math.max(d,(g+z)/u),h);l.splitLazy?(s.value&&(s.value.style[p.value[0]]=`${c*100}%`),l.target=c):o.value=c,m.emitEvent(t.onMove,c)},onEnd:l=>{s.value&&(s.value.style.display="");const u=l.target;l.splitLazy&&(Math.abs(u-o.value)>.01&&y(),o.value=u),m.emitEvent(t.onMoveEnd,o.value)}}),C=e.computed(()=>{let l="";return r.value&&(t.vertical?l=r.value<0?"top":"bottom":l=r.value<0?"left":"right"),{[i.b()]:!0,[i.bs("vars")]:!0,[i.bm("inherit")]:t.inherit,[i.bm(t.vertical?"vertical":"horizontal")]:!0,[i.bm("moving")]:$.value,[i.bm(`${l}-full`)]:!!l,[i.bm("transition")]:f.value}}),S=e.computed(()=>t.vertical?"offsetHeight":"offsetWidth"),p=e.computed(()=>t.vertical?["top","bottom"]:["left","right"]),k=e.computed(()=>({[p.value[1]]:r.value<0?"0":r.value>0?"100%":`${(1-o.value)*100}%`})),M=e.computed(()=>({[p.value[0]]:r.value<0?"100%":r.value>0?"0":`${o.value*100}%`})),N=e.computed(()=>({[p.value[0]]:r.value<0?"100%":r.value>0?"0":`calc(${o.value*100}% - var(${i.cv("handler-size")}) * 0.5)`})),w=e.computed(()=>t.vertical?[b.ChevronDown,b.ChevronUp]:[b.ChevronRight,b.ChevronLeft]);e.watch(()=>t.value,l=>{l.toFixed(5)!==o.value.toFixed(5)&&(o.value=l,y())}),e.watch(o,l=>{m.emitEvent(t.onChange,l),a("update:value",l),s.value&&(s.value.style[p.value[0]]=`${l*100}%`)}),e.watch(r,l=>{if(y(),l){let u;t.vertical?u=l<0?"top":"bottom":u=l<0?"left":"right",m.emitEvent(t.onFull,u)}else m.emitEvent(t.onReset)});function y(){f.value=!t.noTransition&&!$.value}function F(){f.value=!1}function V(l){!t.canFull||(r.value?r.value=0:r.value=l)}return{props:t,nh:i,className:C,position:p,leftPaneStyle:k,rightPaneStyle:M,triggerStyle:N,fullIcons:w,wrapper:v,guide:s,handler:E,removeTransition:F,handleFull:V}}});function R(n,a,t,i,o,r){const f=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",{ref:"wrapper",class:e.normalizeClass(n.className),onTransitionend:a[4]||(a[4]=(...v)=>n.removeTransition&&n.removeTransition(...v))},[e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("panel"),n.nh.bem("panel",n.props.vertical?"top":"left")]),style:e.normalizeStyle(n.leftPaneStyle)},[e.renderSlot(n.$slots,"left")],6),e.createElementVNode("div",{class:e.normalizeClass([n.nh.be("panel"),n.nh.bem("panel",n.props.vertical?"bottom":"right")]),style:e.normalizeStyle(n.rightPaneStyle)},[e.renderSlot(n.$slots,"right")],6),e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("trigger")),style:e.normalizeStyle(n.triggerStyle)},[e.createElementVNode("div",{ref:"handler",class:e.normalizeClass(n.nh.be("handler"))},[n.props.canFull?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("button",{class:e.normalizeClass([n.nh.be("button"),n.nh.bem("button",`${n.props.vertical?"top":"left"}-full`)]),onPointerdown:a[0]||(a[0]=e.withModifiers(()=>{},["stop"])),onClick:a[1]||(a[1]=e.withModifiers(v=>n.handleFull(-1),["left"]))},[e.createVNode(f,{icon:n.fullIcons[0],scale:.6},null,8,["icon","scale"])],34),e.createElementVNode("button",{class:e.normalizeClass([n.nh.be("button"),n.nh.bem("button",`${n.props.vertical?"bottom":"right"}-full`)]),onPointerdown:a[2]||(a[2]=e.withModifiers(()=>{},["stop"])),onClick:a[3]||(a[3]=e.withModifiers(v=>n.handleFull(1),["left"]))},[e.createVNode(f,{icon:n.fullIcons[1],scale:.6},null,8,["icon","scale"])],34)],64)):e.renderSlot(n.$slots,"handler",{key:1},()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(6,v=>e.createElementVNode("span",{key:v,class:e.normalizeClass(n.nh.be("pointer"))},null,2)),64))])],2)],6),e.createElementVNode("div",{ref:"guide",class:e.normalizeClass(n.nh.be("guide"))},null,2)],34)}var D=B(H,[["render",R]]);module.exports=D;

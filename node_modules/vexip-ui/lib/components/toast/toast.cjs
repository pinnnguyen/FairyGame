"use strict";var e=require("vue");require("../icon/index.cjs");require("../renderer/index.cjs");require("../../common/config/src/index.cjs");var i=require("@vexip-ui/utils"),H=require("./props.cjs"),P=require("../../_virtual/plugin-vue_export-helper.cjs"),q=require("../icon/icon.cjs"),S=require("../renderer/renderer.cjs"),N=require("../../common/config/src/namespace.cjs"),j=require("../../common/config/src/props.cjs"),g=require("../../common/config/src/z-index.cjs");const F=e.defineComponent({name:"Toast",components:{Icon:q,Renderer:S},props:H.toastProps,emits:[],setup(s){const a=N.useNameHelper("toast"),r=j.useProps("toast",s,{bodyWidth:100,icon:null,iconProps:()=>({}),position:"center",transitionName:()=>a.ns("ease"),closable:!1,maskClose:!1,showMask:!1,maskClass:null,maskStyle:null,renderer:{default:null,isFunc:!0,static:!0},parseHtml:!1}),n=e.reactive({visible:!1,zIndex:0,content:"",icon:r.icon,iconProps:r.iconProps,position:r.position,transition:r.transitionName,closable:r.closable,maskClose:r.maskClose,showMask:r.showMask,maskClass:r.maskClass,maskStyle:r.maskStyle,parseHtml:r.parseHtml,textOnly:!1,renderer:r.renderer,onClose:null}),m=new Promise(o=>{e.onMounted(()=>{e.nextTick(o)})});async function k(o){var p,u,d,C,v,f,y,b,h,B,w;if(n.zIndex=g.useZIndex().value,await m,n.content=(p=o.content)!=null?p:"",n.icon=(u=o.icon)!=null?u:r.icon,n.iconProps=(d=o.iconProps)!=null?d:r.iconProps,n.position=(C=o.position)!=null?C:r.position,n.transition=(v=o.transitionName)!=null?v:r.transitionName,n.closable=(f=o.closable)!=null?f:r.closable,n.maskClose=(y=o.maskClose)!=null?y:r.maskClose,n.showMask=(b=o.showMask)!=null?b:r.showMask,n.maskClass=(h=o.maskClass)!=null?h:r.maskClass,n.maskStyle=(B=o.maskStyle)!=null?B:r.maskStyle,n.parseHtml=(w=o.parseHtml)!=null?w:r.parseHtml,n.renderer=i.isFunction(o.renderer)?o.renderer:r.renderer,n.onClose=o.onClose||null,n.textOnly=!n.icon,i.isFunction(n.renderer)){const z=n.renderer;n.renderer=()=>z(o),n.textOnly=!1}n.visible=!0}function l(){n.visible=!1,i.isFunction(n.onClose)&&n.onClose()}function c(){n.visible||(n.content="",n.icon=r.icon,n.iconProps=r.iconProps,n.position=r.position,n.transition=r.transitionName,n.closable=r.closable,n.maskClose=r.maskClose,n.showMask=r.showMask,n.maskClass=r.maskClass,n.maskStyle=r.maskStyle,n.parseHtml=r.parseHtml,n.textOnly=!1,n.renderer=r.renderer,n.onClose=null)}function t(){n.visible&&n.closable&&l()}function M(){n.visible&&n.maskClose&&l()}return{props:r,nh:a,state:n,isFunction:i.isFunction,openToast:k,cloasToast:l,handleReset:c,handleWrapperClick:t,handleMaskClick:M}}}),I=["innerHTML"];function T(s,a,r,n,m,k){const l=e.resolveComponent("Renderer"),c=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass({[s.nh.b()]:!0,[s.nh.bs("vars")]:!0,[s.nh.bm("text-only")]:s.state.textOnly}),style:e.normalizeStyle({zIndex:s.state.zIndex})},[e.createVNode(e.Transition,{name:s.nh.ns("fade")},{default:e.withCtx(()=>[s.state.showMask&&s.state.visible?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([s.nh.be("mask"),s.state.maskClass]),style:e.normalizeStyle(s.state.maskStyle),onClick:a[0]||(a[0]=(...t)=>s.handleMaskClick&&s.handleMaskClick(...t))},null,6)):e.createCommentVNode("",!0)]),_:1},8,["name"]),e.createVNode(e.Transition,{name:s.state.transition},{default:e.withCtx(()=>[s.state.visible?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass({[s.nh.be("wrapper")]:!0,[s.nh.bem("wrapper",s.state.position)]:s.state.position!=="center",[s.nh.bem("wrapper","closable")]:s.state.closable}),onClick:a[1]||(a[1]=(...t)=>s.handleWrapperClick&&s.handleWrapperClick(...t))},[s.isFunction(s.state.renderer)?(e.openBlock(),e.createBlock(l,{key:0,renderer:s.state.renderer},null,8,["renderer"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[s.state.icon?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(s.nh.be("icon"))},[s.isFunction(s.icon)?(e.openBlock(),e.createBlock(l,{key:0,renderer:s.icon},null,8,["renderer"])):(e.openBlock(),e.createBlock(c,e.mergeProps({key:1,icon:s.state.icon,scale:1.8},s.state.iconProps),null,16,["icon","scale"]))],2)):e.createCommentVNode("",!0),s.state.parseHtml?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(s.nh.be("content")),innerHTML:s.state.content},null,10,I)):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(s.nh.be("content"))},e.toDisplayString(s.state.content),3))],64))],2)):e.createCommentVNode("",!0)]),_:1},8,["name"])],6)}var E=P(F,[["render",T]]);module.exports=E;

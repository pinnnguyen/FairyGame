"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var o=require("vue"),s=require("@vexip-ui/utils"),R=require("./symbol.cjs");function B({currentScroll:t=o.ref(0),trackSpeed:f=o.ref(2),track:v=o.ref(null),bar:u=o.ref(null),tracking:p=o.ref(!1),type:g=o.ref(R.ScrollbarType.VERTICAL),barLength:d=o.ref(35),disabled:y=o.ref(!1),handleDown:b=s.noop,handleMove:c=s.noop,handleUp:L=s.noop,handleScroll:q=s.noop}){let r,i,n,l,h=!0,M=!1;function T(){if(!p.value)return;M=!0;const e=I(l,t.value);let a=!1;h?t.value<l&&(t.value+=e*f.value,a=!0):t.value>l&&(t.value-=e*f.value,a=!0),a&&(w(),q(t.value)),(p.value&&h?t.value<l:t.value>l)?requestAnimationFrame(T):M=!1}function x(e){if(y.value||e.button>0||(e.stopPropagation(),e.preventDefault(),!v.value||!u.value))return!1;document.addEventListener("pointermove",A),document.addEventListener("pointerup",C);const a=v.value.getBoundingClientRect(),m=u.value.getBoundingClientRect();let E;g.value===R.ScrollbarType.VERTICAL?(r=a.height,i=m.top-a.top,n=m.top,E=i+e.clientY-n):(r=a.width,i=m.left-a.left,n=m.left,E=i+e.clientX-n),l=Math.max(0,Math.min(E/r/(100-d.value/2)*1e4,100)),h=l>=t.value,p.value=!0,b(t.value),T()}const D=s.throttle(e=>{let a;g.value===R.ScrollbarType.VERTICAL?a=i+e.clientY-n:a=i+e.clientX-n,l=Math.max(0,Math.min(a/r/(100-d.value/2)*1e4,100)),!M&&T()});function A(e){e.stopPropagation(),s.USE_TOUCH||e.preventDefault(),c(t.value),D(e)}function C(e){e.preventDefault(),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",C),p.value=!1,L(t.value)}function w(){t.value=Math.max(0,Math.min(t.value,100))}return{trackSpeed:f,track:v,bar:u,tracking:p,barLength:d,disabled:y,handleMouseDown:x}}function I(t,f){const v=Math.abs(t-f);for(let u=0;u<5;++u)if(v<(u+1)*20)return 1+.25*u;return 2}exports.useTrack=B;

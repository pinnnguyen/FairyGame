"use strict";var e=require("vue");require("../renderer/index.cjs");require("../tab-nav/index.cjs");require("../tab-nav-item/index.cjs");require("../../common/config/src/index.cjs");var i=require("@vexip-ui/utils"),N=require("./props.cjs"),T=require("./symbol.cjs"),q=require("../../_virtual/plugin-vue_export-helper.cjs"),$=require("../renderer/renderer.cjs"),y=require("../tab-nav/tab-nav.cjs"),j=require("../tab-nav/tab-nav-item.cjs"),u=require("../../common/config/src/props.cjs"),B=require("../../common/config/src/namespace.cjs");const E=e.defineComponent({name:"Tabs",components:{Renderer:$,TabNav:y,TabNavItem:j},props:N.tabsProps,emits:["update:active"],setup(n,{emit:d}){const s=u.useProps("tabs",n,{active:{default:null,static:!0},card:!1,align:"left",placement:"top",closable:!1,showAdd:!1}),o=e.ref(s.active),p=e.ref(0),l=e.ref(new Set),v=e.ref(!1),m=e.computed(()=>({transform:`translateX(-${p.value}00%) translateZ(0)`})),t=e.computed(()=>Array.from(l.value)),r=i.debounceMinor(()=>{t.value.forEach((a,b)=>{i.isNull(a.label)&&(a.label=b+1)}),t.value.length>=1&&h()&&(o.value=t.value[0].label)}),c=i.debounceMinor(()=>{const a=Array.from(l.value).findIndex(b=>b.label===o.value);~a&&(p.value=a)});e.provide(T.TABS_STATE,e.reactive({currentActive:o,handleActive:f,increaseItem:C,decreaseItem:g,refreshLabels:r})),e.watch(()=>s.active,a=>{o.value=a}),e.onMounted(c);function h(){return i.isNull(o.value)||o.value===""}function C(a){l.value.add(a),r()}function g(a){l.value.delete(a),r()}function f(a){o.value=a,c(),u.emitEvent(s.onChange,a),d("update:active",a)}function k(){u.emitEvent(s.onAdd)}function A(a){u.emitEvent(s.onClose,a)}return{props:s,nh:B.useNameHelper("tabs"),currentActive:o,isTransition:v,mainStyle:m,itemList:t,isFunction:i.isFunction,handleActive:f,handleAdd:k,handleClose:A}}});function S(n,d,s,o,p,l){const v=e.resolveComponent("Renderer"),m=e.resolveComponent("TabNavItem"),t=e.resolveComponent("TabNav");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([n.nh.b(),n.nh.bm(n.props.placement),n.props.inherit&&n.nh.bm("inherit")])},[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("header"))},[e.createVNode(t,{inherit:"",active:n.currentActive,card:n.props.card,align:n.props.align,placement:n.props.placement,closable:n.props.closable,"show-add":n.props.showAdd,onChange:n.handleActive,onAdd:n.handleAdd,onClose:n.handleClose},e.createSlots({default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.itemList,(r,c)=>(e.openBlock(),e.createBlock(m,{key:c,label:r.label,icon:r.icon,disabled:r.disabled,closable:r.closable},{default:e.withCtx(()=>[n.isFunction(r.labelRenderer)?(e.openBlock(),e.createBlock(v,{key:0,renderer:r.labelRenderer,data:{label:r.label,disabled:r.disabled}},null,8,["renderer","data"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(r.name||r.label),1)],64))]),_:2},1032,["label","icon","disabled","closable"]))),128)),n.$slots.add?e.renderSlot(n.$slots,"add",{key:0}):e.createCommentVNode("",!0)]),_:2},[n.$slots.prefix?{name:"prefix",fn:e.withCtx(()=>[e.renderSlot(n.$slots,"prefix")]),key:"0"}:void 0,n.$slots.suffix?{name:"suffix",fn:e.withCtx(()=>[e.renderSlot(n.$slots,"suffix")]),key:"1"}:void 0]),1032,["active","card","align","placement","closable","show-add","onChange","onAdd","onClose"])],2),e.createElementVNode("div",{class:e.normalizeClass({[n.nh.be("main")]:!0,[n.nh.bem("main","transition")]:n.isTransition}),onTransitionend:d[0]||(d[0]=r=>n.isTransition=!1)},[e.renderSlot(n.$slots,"default")],34)],2)}var w=q(E,[["render",S]]);module.exports=w;

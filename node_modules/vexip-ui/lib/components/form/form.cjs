"use strict";var t=require("vue");require("../row/index.cjs");require("../../common/config/src/index.cjs");var w=require("./props.cjs"),f=require("./symbol.cjs"),E=require("../../_virtual/plugin-vue_export-helper.cjs"),q=require("../row/row.cjs"),A=require("../../common/config/src/props.cjs"),M=require("../../common/config/src/namespace.cjs");const F=Object.freeze(["get","post","put","delete"]),P=Object.freeze(["right","top","left"]),S=t.defineComponent({name:"Form",components:{Row:q},inheritAttrs:!0,props:w.formProps,setup(i){const a=A.useProps("form",i,{method:{default:"post",validator:e=>F.includes(e)},action:null,model:{default:()=>({}),static:!0},rules:()=>({}),labelWidth:"auto",labelAlign:{default:"right",validator:e=>P.includes(e)},allRequired:!1,labelSuffix:"",hideAsterisk:!1,validateAll:!1,hideLabel:!1,disabled:!1,loading:!1,size:A.createSizeProp(),inline:!1,gap:[8,0],justify:"start",align:"top"}),n=M.useNameHelper("form"),l=t.reactive(new Set),d=t.computed(()=>[n.b(),n.bs("vars"),n.bm(`label-${a.labelAlign}`),{[n.bm("inherit")]:a.inherit,[n.bm("disabled")]:a.disabled,[n.bm("loading")]:a.loading,[n.bm(a.size)]:a.size!=="default",[n.bm("inline")]:a.inline}]),p=t.computed(()=>Math.max(...Array.from(l).map(e=>e.labelWidth.value)));t.provide(f.FORM_PROPS,a),t.provide(f.FORM_FIELDS,l),t.provide(f.FORM_ACTIONS,{getLabelWidth:c,validate:m,validateFields:h,reset:b,resetFields:g,clearError:j,clearFieldsError:y});function c(){return typeof a.labelWidth=="number"?a.labelWidth:p.value}function u(){const e={};for(const r of l)r.prop.value&&(e[r.prop.value]=r);return e}function m(){return v(l)}function h(e){Array.isArray(e)||(e=[e]);const r=u(),o=new Set;return e.forEach(s=>{r[s]&&o.add(r[s])}),v(o)}function v(e){const r=[];return e.forEach(o=>{r.push(o.validate())}),new Promise(o=>{Promise.all(r).then(s=>{o(s.flat().filter(Boolean))})})}function b(){l.forEach(e=>{e.reset()})}function g(e){Array.isArray(e)||(e=[e]);const r=u();e.forEach(o=>{r[o]&&r[o].reset()})}function j(){l.forEach(e=>{e.clearError()})}function y(e){Array.isArray(e)||(e=[e]);const r=u();e.forEach(o=>{r[o]&&r[o].clearError()})}return{props:a,className:d,validate:m,validateFields:h,reset:b,resetFields:g,clearError:j,clearFieldsError:y}}});function R(i,a,n,l,d,p){const c=t.resolveComponent("Row");return t.openBlock(),t.createBlock(c,t.mergeProps(i.$attrs,{class:i.className,tag:"form",method:i.props.action&&i.props.method,action:i.props.action,gap:i.props.gap,justify:i.props.justify,align:i.props.align,"column-flex":void 0}),{default:t.withCtx(()=>[t.renderSlot(i.$slots,"default")]),_:3},16,["class","method","action","gap","justify","align"])}var $=E(S,[["render",R]]);module.exports=$;

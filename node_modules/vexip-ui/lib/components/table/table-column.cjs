"use strict";var t=require("vue");require("../../common/config/src/index.cjs");var o=require("@vexip-ui/utils"),m=require("./props.cjs"),h=require("./symbol.cjs"),p=require("../../common/config/src/props.cjs");const v=Object.keys(m.tableColumnProps),w={idKey:"key"},x=["className","style","attrs","filter","sorter","metaData"],C=["order","selection","expand"];var R=t.defineComponent({name:"TableColumn",props:m.tableColumnProps,setup(y,{slots:l}){const r=p.useProps("tableColumn",y,{idKey:{default:null,validator:e=>!o.isNull(e),static:!0},name:{default:"",static:!0},accessor:{default:null,isFunc:!0,static:!0},fixed:{default:!1,static:!0},className:null,style:null,attrs:null,type:{default:null,validator:e=>C.includes(e),static:!0},width:null,filter:()=>({}),sorter:!1,renderer:{default:null,isFunc:!0,static:!0},headRenderer:{default:null,isFunc:!0,static:!0},order:{default:0,static:!0},noEllipsis:!1,checkboxSize:p.createSizeProp(),disableRow:{default:null,isFunc:!0},truthIndex:!1,orderLabel:{default:null,isFunc:!0},metaData:{default:()=>({}),validator:e=>!o.isNull(e)}}),a=t.inject(h.TABLE_ACTION,null),n=t.reactive({});for(const e of v){if(e==="renderer"||e==="headRenderer")continue;const u=w[e]||e;n[u]=r[e],e==="idKey"?t.watch(()=>r[e],s=>{o.isNull(s)&&r.type?n[u]=s=`__vxp_${r.type}`:n[u]=s}):t.watch(()=>r[e],s=>{n[u]=s},{deep:x.includes(e)})}t.watch(()=>l.default,i),t.watch(()=>r.renderer,i),t.watch(()=>l.head,c),t.watch(()=>r.headRenderer,c),i(),c(),a==null||a.increaseColumn(n),t.onBeforeUnmount(()=>{a==null||a.decreaseColumn(n)});function i(){n.renderer=e=>{if(typeof l.default=="function")return l.default(e);if(typeof r.renderer=="function")return r.renderer(e);const u=e.row,s=e.rowIndex;if(typeof r.accessor=="function"){const f=r.accessor(u,s);return o.isNull(f)?"":String(f)}const d=u[n.key];return o.isNull(d)?"":String(d)}}function c(){n.headRenderer=e=>typeof l.head=="function"?l.head(e):typeof r.headRenderer=="function"?r.headRenderer(e):r.name}return()=>null}});module.exports=R;

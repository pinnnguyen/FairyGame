"use strict";var n=require("vue");require("../checkbox/index.cjs");require("../ellipsis/index.cjs");require("../icon/index.cjs");require("../renderer/index.cjs");require("../../common/config/src/index.cjs");var M=require("@vexip-ui/utils"),N=require("@vexip-ui/icons"),f=require("./symbol.cjs"),T=require("../../_virtual/plugin-vue_export-helper.cjs"),q=require("../checkbox/checkbox.cjs"),D=require("../ellipsis/ellipsis.cjs"),S=require("../icon/icon.cjs"),A=require("../renderer/renderer.cjs"),F=require("../../common/config/src/namespace.cjs");const L=["order","selection","expand"],V=n.defineComponent({name:"TableCell",components:{Checkbox:q,Ellipsis:D,Icon:S,Renderer:A,AngleRight:N.AngleRight},props:{row:{type:Object,default:()=>({})},rowIndex:{type:Number,default:-1},column:{type:Object,default:()=>({})},columnIndex:{type:Number,default:-1}},setup(e){const{state:l,getters:s,mutations:p}=n.inject(f.TABLE_STORE),t=n.inject(f.TABLE_ACTION),d=F.useNameHelper("table"),h=n.computed(()=>{let o=null;return typeof l.cellClass=="function"?o=l.cellClass(e.row.data,e.column,e.rowIndex,e.columnIndex):o=l.cellClass,[d.be("cell"),{[d.bem("cell","center")]:L.includes(e.column.type),[d.bem("cell","wrap")]:e.column.noEllipsis},e.column.className||null,o]}),w=n.computed(()=>{var a;const o=l.widths[e.column.key];let i="";return typeof l.cellStyle=="function"?i=l.cellStyle(e.row.data,e.column,e.rowIndex,e.columnIndex):i=l.cellStyle,[{flex:`${o} 0 auto`,width:`${(a=e.column.width)!=null?a:o}px`,maxWidth:`${e.column.width}px`},e.column.style||"",i]}),y=n.computed(()=>{let o;return typeof l.cellAttrs=="function"?o=l.cellAttrs(e.row.data,e.column,e.rowIndex,e.columnIndex):o=l.cellAttrs,{...e.column.attrs||{},...o||{}}});function u(o){return o.type==="selection"}function k(o){return o.type==="order"}function r(o){return o.type==="expand"}function b(o){return u(o)||k(o)||r(o)}function c(o){return{row:e.row.data,key:e.row.key,rowIndex:e.rowIndex,column:e.column,columnIndex:e.columnIndex,event:o}}function v(o){t&&t.emitCellEnter(c(o))}function E(o){t&&t.emitCellLeave(c(o))}function B(o){t&&t.emitCellClick(c(o))}function I(o){t&&t.emitCellDblclick(c(o))}function g(o){t&&t.emitCellContextmenu(c(o))}function R(o){if(!s.disableCheckRows[o.key]){const i=!o.checked,{data:a,key:m,index:C}=o;p.handleCheck(m,i),t.emitRowCheck({row:a,key:m,index:C,checked:i})}}function j(o){if(!s.disableExpandRows[o.key]){const i=!o.expanded,{data:a,key:m,index:C}=o;p.handleExpand(m,i),t.emitRowExpand({row:a,key:m,index:C,expanded:i})}}return{nh:d,className:h,style:w,attrs:y,tooltipTheme:n.toRef(l,"tooltipTheme"),tooltipWidth:n.toRef(l,"tooltipWidth"),disableCheckRows:n.toRef(s,"disableCheckRows"),disableExpandRows:n.toRef(s,"disableExpandRows"),isFunction:M.isFunction,isSelection:u,isOrder:k,isExpand:r,isTypeColumn:b,handleMouseEnter:v,handleMouseLeave:E,handleClick:B,handleDblclick:I,handleContextmenu:g,handleCheckRow:R,handleExpandRow:j}}});function $(e,l,s,p,t,d){const h=n.resolveComponent("Checkbox"),w=n.resolveComponent("AngleRight"),y=n.resolveComponent("Icon"),u=n.resolveComponent("Renderer"),k=n.resolveComponent("Ellipsis");return e.isTypeColumn(e.column)?(n.openBlock(),n.createElementBlock("div",n.mergeProps({key:0,class:e.className,role:"cell",style:e.style},e.attrs,{onMouseenter:l[2]||(l[2]=(...r)=>e.handleMouseEnter&&e.handleMouseEnter(...r)),onMouseleave:l[3]||(l[3]=(...r)=>e.handleMouseLeave&&e.handleMouseLeave(...r)),onClick:l[4]||(l[4]=(...r)=>e.handleClick&&e.handleClick(...r)),onDblclick:l[5]||(l[5]=(...r)=>e.handleDblclick&&e.handleDblclick(...r)),onContextmenu:l[6]||(l[6]=(...r)=>e.handleContextmenu&&e.handleContextmenu(...r))}),[e.isSelection(e.column)?(n.openBlock(),n.createBlock(h,{key:0,inherit:"",class:n.normalizeClass(e.nh.be("selection")),checked:e.row.checked,size:e.column.checkboxSize||"default",disabled:e.disableCheckRows[e.row.key],onClick:l[0]||(l[0]=n.withModifiers(r=>e.handleCheckRow(e.row),["prevent","stop"]))},null,8,["class","checked","size","disabled"])):e.isOrder(e.column)?(n.openBlock(),n.createElementBlock("span",{key:1,class:n.normalizeClass(e.nh.be("order"))},n.toDisplayString(e.column.orderLabel&&e.column.orderLabel(e.column.truthIndex?e.row.index:e.rowIndex)),3)):e.isExpand(e.column)?(n.openBlock(),n.createElementBlock(n.Fragment,{key:2},[e.disableExpandRows[e.row.key]?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass({[e.nh.be("expand")]:!0,[e.nh.bem("expand","active")]:e.row.expanded}),onClick:l[1]||(l[1]=n.withModifiers(r=>e.handleExpandRow(e.row),["stop"]))},[n.createVNode(y,null,{default:n.withCtx(()=>[n.createVNode(w)]),_:1})],2))],64)):n.createCommentVNode("",!0)],16)):(n.openBlock(),n.createElementBlock("div",n.mergeProps({key:1,class:e.className,role:"cell",style:e.style},e.attrs,{onMouseenter:l[7]||(l[7]=(...r)=>e.handleMouseEnter&&e.handleMouseEnter(...r)),onMouseleave:l[8]||(l[8]=(...r)=>e.handleMouseLeave&&e.handleMouseLeave(...r)),onClick:l[9]||(l[9]=(...r)=>e.handleClick&&e.handleClick(...r)),onDblclick:l[10]||(l[10]=(...r)=>e.handleDblclick&&e.handleDblclick(...r)),onContextmenu:l[11]||(l[11]=(...r)=>e.handleContextmenu&&e.handleContextmenu(...r))}),[e.column.noEllipsis?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[e.isFunction(e.column.renderer)?(n.openBlock(),n.createBlock(u,{key:0,renderer:e.column.renderer,data:{row:e.row.data,rowIndex:e.rowIndex,column:e.column,columnIndex:e.columnIndex}},null,8,["renderer","data"])):e.isFunction(e.column.accessor)?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode(n.toDisplayString(e.column.accessor(e.row.data,e.rowIndex)),1)],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:2},[n.createTextVNode(n.toDisplayString(e.row.data[e.column.key]),1)],64))],64)):(n.openBlock(),n.createBlock(k,{key:0,inherit:"","tooltip-theme":e.tooltipTheme,"tip-max-width":e.tooltipWidth},{default:n.withCtx(()=>[e.isFunction(e.column.renderer)?(n.openBlock(),n.createBlock(u,{key:0,renderer:e.column.renderer,data:{row:e.row.data,rowIndex:e.rowIndex,column:e.column,columnIndex:e.columnIndex}},null,8,["renderer","data"])):e.isFunction(e.column.accessor)?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode(n.toDisplayString(e.column.accessor(e.row.data,e.rowIndex)),1)],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:2},[n.createTextVNode(n.toDisplayString(e.row.data[e.column.key]),1)],64))]),_:1},8,["tooltip-theme","tip-max-width"]))],16))}var z=T(V,[["render",$]]);module.exports=z;

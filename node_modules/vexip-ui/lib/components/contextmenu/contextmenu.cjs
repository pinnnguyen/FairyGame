"use strict";var e=require("vue");require("../dropdown/index.cjs");require("../dropdown-list/index.cjs");require("../renderer/index.cjs");require("../../common/config/src/index.cjs");var v=require("@vexip-ui/utils"),h=require("./render.cjs"),C=require("../../_virtual/plugin-vue_export-helper.cjs"),g=require("../dropdown/dropdown.cjs"),b=require("../dropdown/dropdown-list.cjs"),q=require("../renderer/renderer.cjs"),j=require("../../common/config/src/namespace.cjs");const k=e.defineComponent({name:"Contextmenu",components:{Dropdown:g,DropdownList:b,Renderer:q},setup(){const n=j.useNameHelper("contextmenu"),o=e.ref(!1),u=e.ref([]),p=e.ref(!1),t=e.reactive({x:0,y:0}),i=e.ref(null),s=e.ref(null);function d(l){var c;return t.x=l.clientX||0,t.y=l.clientY||0,u.value=l.configs,p.value=(c=l.appear)!=null?c:!1,o.value=!0,new Promise(m=>{i.value=w=>{m(w)},s.value=()=>{m(null)}})}function a(){i.value=null,s.value=null}function r(l){o.value=!1,v.isFunction(i.value)&&(i.value(l),a())}function f(){o.value=!1,v.isFunction(s.value)&&(s.value(),a())}return{nh:n,visible:o,configs:u,appear:p,position:t,renderItem:h.renderItem,openContextmenu:d,handleSelect:r,handleCancel:f}}});function y(n,o,u,p,t,i){const s=e.resolveComponent("Renderer"),d=e.resolveComponent("DropdownList"),a=e.resolveComponent("Dropdown");return e.openBlock(),e.createBlock(a,{visible:n.visible,"onUpdate:visible":o[0]||(o[0]=r=>n.visible=r),class:e.normalizeClass([n.nh.b(),n.nh.bs("vars")]),trigger:"click",placement:"right-start",appear:n.appear,transfer:!1,style:e.normalizeStyle({top:`${n.position.y}px`,left:`${n.position.x}px`}),onContextmenu:o[1]||(o[1]=e.withModifiers(()=>{},["prevent","stop"])),onSelect:n.handleSelect,onOutsideClose:n.handleCancel},{drop:e.withCtx(()=>[e.createVNode(d,{class:e.normalizeClass([n.nh.be("list"),n.configs.some(r=>r.icon)?n.nh.bem("list","icons"):n.nh.bem("list","no-icon"),n.configs.some(r=>r.children&&r.children.length)?n.nh.bem("list","arrows"):n.nh.bem("list","no-arrow")])},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.configs,r=>(e.openBlock(),e.createBlock(s,{key:r.key,data:{config:r,nh:n.nh},renderer:n.renderItem},null,8,["data","renderer"]))),128))]),_:1},8,["class"])]),_:1},8,["visible","class","appear","style","onSelect","onOutsideClose"])}var B=C(k,[["render",y]]);module.exports=B;

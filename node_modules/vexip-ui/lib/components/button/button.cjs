"use strict";var l=require("vue");require("../badge/index.cjs");require("../collapse-transition/index.cjs");require("../icon/index.cjs");var O=require("../form/symbol.cjs");require("../../common/config/src/index.cjs");var R=require("@vexip-ui/icons"),i=require("@vexip-ui/utils"),F=require("./props.cjs"),N=require("./symbol.cjs"),h=require("../../common/config/src/props.cjs"),L=require("../../common/config/src/namespace.cjs"),v=require("../icon/icon.cjs"),_=require("../collapse/collapse-transition.cjs"),$=require("../badge/badge.cjs"),D=l.defineComponent({name:"Button",props:F.buttonProps,emits:[],setup(w,{slots:s}){const u=l.inject(O.FIELD_OPTIONS,null),o=h.useProps("button",w,{size:h.createSizeProp(u?u.size:void 0),type:{default:null,validator:e=>N.buttonTypes.includes(e)},dashed:!1,text:!1,simple:!1,ghost:!1,disabled:()=>u?u.disabled.value:!1,loading:()=>u?u.loading.value:!1,circle:!1,loadingIcon:R.Spinner,loadingSpin:!1,icon:null,color:null,buttonType:{default:"button",validator:e=>["button","submit","reset"].includes(e)},block:!1,tag:"button",noPulse:!1,badge:null}),d=l.inject(N.GROUP_STATE,null),r=L.useNameHelper("button"),b=l.ref(!1),p=l.computed(()=>!s.default),y=l.computed(()=>{var e,c;return(c=(e=o.type)!=null?e:d==null?void 0:d.type)!=null?c:"default"}),j=l.computed(()=>{var e;return(e=d==null?void 0:d.size)!=null?e:o.size}),A=l.computed(()=>({[r.b()]:!0,[r.bs("vars")]:!0,[r.bm("inherit")]:o.inherit,[r.bm(y.value)]:y.value!=="default",[r.bm("simple")]:!o.ghost&&o.simple,[r.bm("ghost")]:o.ghost,[r.bm("text")]:o.text,[r.bm("dashed")]:o.dashed,[r.bm("disabled")]:o.disabled,[r.bm("loading")]:o.loading,[r.bm("circle")]:o.circle,[r.bm("icon-only")]:p.value,[r.bm(j.value)]:j.value!=="default",[r.bm("pulsing")]:b.value})),q=l.computed(()=>{if(o.color){const e=getComputedStyle(document.documentElement),c=i.parseColorToRgba(e.getPropertyValue(r.nv("color-black"))||"#000"),t=i.parseColorToRgba(e.getPropertyValue(r.nv("color-white"))||"#fff"),a=i.parseColorToRgba(o.color);return{base:a.toString(),light2:i.mixColor(t,a,.2).toString(),dark1:i.mixColor(c,a,.1).toString(),opacity1:i.adjustAlpha(a,.9).toString(),opacity3:i.adjustAlpha(a,.7).toString(),opacity4:i.adjustAlpha(a,.6).toString(),opacity7:i.adjustAlpha(a,.3).toString(),opacity8:i.adjustAlpha(a,.2).toString(),white8:i.adjustAlpha(t,.2).toString(),white9:i.adjustAlpha(t,.1).toString()}}return null}),C=l.computed(()=>{if(q.value){const{base:e,light2:c,dark1:t,opacity1:a,opacity3:S,opacity4:m,opacity7:z,opacity8:E,white8:B,white9:x}=q.value,{cvm:g,gnv:n}=r;return o.ghost?g({color:e,"color-hover":e,"color-focus":e,"color-active":e,"color-disabled":e,"bg-color":"transparent","bg-color-hover":x,"bg-color-focus":x,"bg-color-active":B,"bg-color-disabled":"transparent","b-color":e,"b-color-hover":c,"b-color-focus":c,"b-color-active":t,"b-color-disabled":n("content-color-disabled"),"pulse-s-color":t}):o.simple?g({color:e,"color-hover":e,"color-focus":n("color-white"),"color-active":n("color-white"),"color-disabled":n("content-color-disabled"),"bg-color":E,"bg-color-hover":z,"bg-color-focus":a,"bg-color-active":a,"bg-color-disabled":n("fill-color-background"),"b-color":m,"b-color-hover":m,"b-color-focus":S,"b-color-active":S,"b-color-disabled":n("border-color-light-1"),"pulse-s-color":t}):o.text||o.dashed?g({...o.dashed?{"b-color":e,"b-color-hover":c,"b-color-focus":c,"b-color-active":t,"pulse-s-color":t}:{},color:e,"color-hover":c,"color-focus":c,"color-active":t,"color-disabled":m}):g({color:n("color-white"),"color-hover":n("color-white"),"color-focus":n("color-white"),"color-active":n("color-white"),"color-disabled":n("content-color-disabled"),"bg-color":e,"bg-color-hover":c,"bg-color-focus":c,"bg-color-active":t,"bg-color-disabled":n("fill-color-background"),"b-color":e,"b-color-hover":c,"b-color-focus":c,"b-color-active":t,"b-color-disabled":n("border-color-light-1"),"pulse-s-color":t})}return{}});function V(e){o.disabled||o.loading||e.button||(o.noPulse||(b.value=!1,requestAnimationFrame(()=>{b.value=!0})),h.emitEvent(o.onClick,e))}function T(){b.value=!1}function f(){return l.createVNode("div",{class:[r.be("icon"),r.bem("icon","loading")]},[s.loading?s.loading():o.loadingSpin?l.createVNode(v,{spin:!0,icon:o.loadingIcon},null):l.createVNode(v,{pulse:!0,icon:o.loadingIcon},null)])}function k(){return o.loading?f():l.createVNode("div",{class:r.be("icon")},[s.icon?s.icon():o.icon?l.createVNode(v,{icon:o.icon},null):null])}function I(){return o.icon||s.icon?o.loading?f():l.createVNode("div",{class:r.be("icon")},[s.icon?s.icon():l.createVNode(v,{icon:o.icon},null)]):l.createVNode(_,{appear:!0,horizontal:!0,"fade-effect":!0},{default:()=>[o.loading&&f()]})}function P(){const e=o.disabled?"disabled":o.type==="default"?"error":o.type;return l.createVNode($,{inherit:!0,class:[r.be("badge"),r.bem("badge",e)],content:o.badge,type:e},null)}return()=>{const e=o.tag||"button";return l.createVNode(e,{type:o.buttonType,class:A.value,role:"button",style:C.value,disabled:o.disabled,onClick:V,onAnimationend:T},{default:()=>[p.value?k():I(),!p.value&&s.default?s.default():null,!p.value&&(o.badge||o.badge===0)?P():null]})}}});module.exports=D;

"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e=require("vue"),v=require("@vexip-ui/utils");function H({mode:r,disabled:b,width:s,height:m,scrollX:p,scrollY:d,onResize:w,onBeforeRefresh:N,onAfterRefresh:W}){const x=e.ref(),g=e.ref(),t=e.reactive({el:x,width:v.toNumber(s.value),height:v.toNumber(m.value)}),u=e.reactive({el:g,width:0,height:0}),M=e.computed(()=>t.width?t.width-u.width:0),S=e.computed(()=>t.height?t.height-u.height:0),P=e.computed(()=>!b.value&&r.value!=="vertical"&&!!t.width&&u.width-t.width>1),T=e.computed(()=>!b.value&&r.value!=="horizontal"&&!!t.height&&u.height-t.height>1),_=e.computed(()=>t.width?Math.max(Math.min(t.width/(u.width||1)*100,99),5):35),j=e.computed(()=>t.height?Math.max(Math.min(t.height/(u.height||1)*100,99),5):35);e.watch(x,()=>{h()}),e.watch(g,()=>{q()}),e.watch(p,a=>{i.x=-a,l()}),e.watch(d,a=>{i.y=-a,l()}),e.watch(s,()=>{h(),l()}),e.watch(m,()=>{h(),l()});function L(a){e.nextTick(()=>{if(!t.el)return;const n=a==="width"?s.value:m.value,B=a.slice(0,1).toUpperCase()+a.slice(1);typeof n=="string"?!n.endsWith("px")&&Number.isNaN(Number(n))?t[a]=t.el[`offset${B}`]:t[a]=parseInt(n):t[a]=n})}function h(){r.value!=="vertical"&&L("width"),r.value!=="horizontal"&&L("height")}const c=e.ref(!1),i=e.reactive({x:-p.value,y:-d.value}),o=e.ref(0),f=e.ref(0);let C;function q(){clearTimeout(C),C=setTimeout(()=>{!u.el||(r.value!=="vertical"&&(u.width=u.el.offsetWidth,t.width>=u.width?i.x=0:i.x===0&&(i.x=-p.value)),r.value!=="horizontal"&&(u.height=u.el.offsetHeight,t.height>=u.height?i.y=0:i.y===0&&(i.y=-d.value)),c.value=!1,setTimeout(()=>{c.value=!0,l()},1))},0)}function l(){!c.value||(r.value!=="vertical"&&(i.x=Math.min(0,Math.max(i.x,M.value))),r.value!=="horizontal"&&(i.y=Math.min(0,Math.max(i.y,S.value))),E())}function E(){o.value=v.multipleFixed(i.x/(M.value||-1),100,2),f.value=v.multipleFixed(i.y/(S.value||-1),100,2),o.value=Math.max(0,Math.min(o.value,100)),f.value=Math.max(0,Math.min(f.value,100))}function k(a){y(),w==null||w(a)}let F=!1;e.onMounted(()=>{y(),F=!0});function y(){typeof N=="function"&&N(),h(),q(),setTimeout(()=>{l(),typeof W=="function"&&W()},F?20:100)}return{wrapperElement:x,contentElement:g,wrapper:t,isReady:c,currentScroll:i,percentX:o,percentY:f,xScrollLimit:M,yScrollLimit:S,enableXScroll:P,enableYScroll:T,xBarLength:_,yBarLength:j,handleResize:k,verifyScroll:l,computePercent:E,refresh:y}}exports.useScrollWrapper=H;

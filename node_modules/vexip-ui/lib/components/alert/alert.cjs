"use strict";var e=require("vue");require("../collapse-transition/index.cjs");require("../icon/index.cjs");require("../../common/config/src/index.cjs");var c=require("@vexip-ui/icons"),N=require("@vexip-ui/utils"),$=require("./props.cjs"),T=require("../../_virtual/plugin-vue_export-helper.cjs"),V=require("../collapse/collapse-transition.cjs"),j=require("../icon/icon.cjs"),m=require("../../common/config/src/props.cjs"),z=require("../../common/config/src/namespace.cjs");const w={default:c.Flag,info:c.CircleInfo,success:c.CircleCheck,warning:c.CircleExclamation,error:c.CircleXmark},A=Object.freeze(["default","info","success","warning","error"]),I=e.defineComponent({name:"Alert",components:{CollapseTransition:V,Icon:j,Xmark:c.Xmark},props:$.alertProps,emits:[],setup(o,{slots:t}){const n=m.useProps("alert",o,{type:{default:"info",validator:r=>A.includes(r)},title:"",colorfulText:!1,icon:!1,closable:!1,iconColor:"",noBorder:!1,banner:!1,manual:!1,scroll:!1,scrollSpeed:1}),l=z.useNameHelper("alert"),p=e.ref(!1),d=e.ref(!1),i=e.ref(0),a=e.ref(0),u=e.ref(0),s=e.ref(),f=e.ref(),C=e.computed(()=>!!(n.title||t.title)),b=e.computed(()=>!!(n.icon||t.icon)),k=e.computed(()=>({[l.b()]:!0,[l.bs("vars")]:!0,[l.bm("inherit")]:n.inherit,[l.bm(n.type)]:n.type,[l.bm("colorful-text")]:n.colorfulText,[l.bm("has-title")]:C.value,[l.bm("has-icon")]:b.value,[l.bm("closable")]:n.closable,[l.bm("no-border")]:!n.banner&&n.noBorder,[l.bm("banner")]:n.banner})),y=e.computed(()=>{var r;return typeof n.icon=="boolean"?(r=w[n.type])!=null?r:null:n.icon}),E=e.computed(()=>({width:`${u.value}px`,transitionDuration:`${i.value}ms`,transform:`translateX(${a.value}px)`}));e.watch(()=>n.scroll,r=>{r&&v()}),e.onMounted(()=>{n.scroll&&v()});function S(){n.manual||(p.value=!0),m.emitEvent(n.onClose)}function q(){m.emitEvent(n.onHide),d.value=!0}function v(){if(s.value&&f.value){const r=s.value.getBoundingClientRect(),h=N.getRangeWidth(f.value),g=(r.width+h)*12/(Math.max(n.scrollSpeed,0)||1);i.value=0,a.value=r.width,u.value=h,requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.value=g,a.value=-h})})}}function B(){m.emitEvent(n.onScrollEnd),requestAnimationFrame(v)}return{props:n,nh:l,closed:p,hidden:d,content:s,scrollEl:f,hasTitle:C,hasIcon:b,className:k,iconComp:y,scrollStyle:E,handleClose:S,handleAfterLeave:q,handleScrollEnd:B}}});function X(o,t,n,l,p,d){const i=e.resolveComponent("Xmark"),a=e.resolveComponent("Icon"),u=e.resolveComponent("CollapseTransition");return o.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u,{key:0,"fade-effect":"",onAfterLeave:o.handleAfterLeave},{default:e.withCtx(()=>[o.closed?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(o.className),role:"alert"},[e.createElementVNode("div",{class:e.normalizeClass(o.nh.be("wrapper"))},[o.hasTitle?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(o.nh.be("title"))},[e.renderSlot(o.$slots,"title",{},()=>[e.createTextVNode(e.toDisplayString(o.title),1)])],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref:"content",class:e.normalizeClass([o.nh.be("content"),o.props.scroll&&o.nh.bem("content","scroll")])},[o.props.scroll?(e.openBlock(),e.createElementBlock("span",{key:0,ref:"scrollEl",class:e.normalizeClass(o.nh.be("scroll")),style:e.normalizeStyle(o.scrollStyle),onTransitionend:t[0]||(t[0]=(...s)=>o.handleScrollEnd&&o.handleScrollEnd(...s))},[e.renderSlot(o.$slots,"default")],38)):e.renderSlot(o.$slots,"default",{key:1})],2)],2),o.props.closable?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(o.nh.be("close")),onClick:t[1]||(t[1]=(...s)=>o.handleClose&&o.handleClose(...s))},[e.renderSlot(o.$slots,"close",{},()=>[e.createVNode(a,{label:"close"},{default:e.withCtx(()=>[e.createVNode(i)]),_:1})])],2)):e.createCommentVNode("",!0),o.hasIcon?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(o.nh.be("icon"))},[e.renderSlot(o.$slots,"icon",{},()=>[e.createVNode(a,{icon:o.iconComp,scale:o.hasTitle?2:1,style:e.normalizeStyle({color:o.props.iconColor})},null,8,["icon","scale","style"])])],2)):e.createCommentVNode("",!0)],2))]),_:3},8,["onAfterLeave"]))}var F=T(I,[["render",X]]);module.exports=F;

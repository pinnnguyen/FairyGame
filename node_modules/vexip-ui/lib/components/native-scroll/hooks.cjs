"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var o=require("vue"),F=require("@vexip-ui/hooks"),r=require("@vexip-ui/utils"),O=require("./helper.cjs");function D({mode:n,disabled:S,appear:v,scrollX:h,scrollY:d,onResize:g,onBeforeRefresh:W,onAfterRefresh:H}){const p=o.ref(),e=o.reactive({el:p,scrollWidth:0,offsetWidth:0,scrollHeight:0,offsetHeight:0}),c=o.computed(()=>e.el?e.scrollWidth-e.offsetWidth:0),a=o.computed(()=>e.el?e.scrollHeight-e.offsetHeight:0),b=o.computed(()=>!S.value&&n.value!=="vertical"&&!!e.el&&e.scrollWidth>e.offsetWidth),T=o.computed(()=>!S.value&&n.value!=="horizontal"&&!!e.el&&e.scrollHeight>e.offsetHeight),k=o.computed(()=>e.el?r.boundRange(e.offsetWidth/(e.scrollWidth||1)*100,5,99):35),C=o.computed(()=>e.el?r.boundRange(e.offsetHeight/(e.scrollHeight||1)*100,5,99):35);o.watch(p,()=>{L()}),o.watch(h,t=>{m(t)}),o.watch(d,t=>{y(t)});const l=o.reactive({x:0,y:0});function m(t){l.x=r.boundRange(t,0,c.value),e.el&&(e.el.scrollLeft=l.x)}function y(t){l.y=r.boundRange(t,0,a.value),e.el&&(e.el.scrollTop=l.y)}const M=o.ref(0),q=o.ref(0),{isMounted:w}=F.useMounted();function L(){!e.el||F.isHiddenElement(e.el)||(e.scrollWidth=e.el.scrollWidth,e.offsetWidth=e.el.offsetWidth,e.scrollHeight=e.el.scrollHeight,e.offsetHeight=e.el.offsetHeight,n.value!=="vertical"&&m(!w.value&&v.value?h.value:l.x||0),n.value!=="horizontal"&&y(!w.value&&v.value?d.value:l.y||0),P())}function P(){e.el&&(M.value=r.multipleFixed(l.x/(c.value||1),100,2),q.value=r.multipleFixed(l.y/(a.value||1),100,2))}function j(t){x(),g==null||g(t)}o.onMounted(()=>{x(),v.value&&f(h.value,d.value)});function x(){typeof W=="function"&&W(),L(),setTimeout(()=>{typeof H=="function"&&H()},0)}function f(t,u,i){return new Promise(s=>{!e.el||((!b.value||Math.abs(l.x-t)<.01)&&(t=l.x),(!T.value||Math.abs(l.y-u)<.01)&&(u=l.y),O.animateScrollTo({duration:i,el:e.el,xFrom:l.x,xTo:r.boundRange(t,0,c.value),yFrom:l.y,yTo:r.boundRange(u,0,a.value),callback:s}))})}function _(t,u,i){return f(l.x+t,l.y+u,i)}function z(t,u,i=0){if(!e.el||(typeof t=="string"&&(t=e.el.querySelector(t)),!r.isElement(t)))return Promise.resolve();const s=e.el.getBoundingClientRect(),R=t.getBoundingClientRect();let B=0,E=0;return n.value!=="vertical"&&(B=R.left-s.left+i),n.value!=="horizontal"&&(E=R.top-s.top+i),f(B,E,u)}return{contentElement:p,currentScroll:l,percentX:M,percentY:q,xScrollLimit:c,yScrollLimit:a,enableXScroll:b,enableYScroll:T,xBarLength:k,yBarLength:C,handleResize:j,setScrollX:m,setScrollY:y,computePercent:P,refresh:x,scrollTo:f,scrollBy:_,scrollToElement:z}}exports.useScrollWrapper=D;

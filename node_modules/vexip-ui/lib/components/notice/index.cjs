"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var _=require("vue"),C=require("./notice.cjs"),o=require("@vexip-ui/utils"),c=require("@vexip-ui/icons");const y={info:{icon:c.CircleInfo},success:{icon:c.CircleCheck},warning:{icon:c.CircleExclamation},error:{icon:c.CircleXmark}},g=["top-right","top-left","bottom-right","bottom-left"];let j=1;function k(){return`notice-${j++}`}class u{constructor(e={}){e={...e,marker:!!e.marker,duration:e.duration?o.toNumber(e.duration):4e3},this._instance=null,this._innerApp=null,this._container=null,this.name="Notice",this.defaults={},this.config(e),this.open=(t,i,n)=>this._open(null,t,i,n),this.info=(t,i,n)=>this._open("info",t,i,n),this.success=(t,i,n)=>this._open("success",t,i,n),this.warning=(t,i,n)=>this._open("warning",t,i,n),this.error=(t,i,n)=>this._open("error",t,i,n)}judge(e,t,i,n){e?this.success(t,n):this.error(i,n)}close(e){o.isNull(e)?this.clear():this._getInstance().remove(e)}config({placement:e,...t}){e&&(this._getInstance().placement=g.includes(e)?e:g[0]),this.defaults={...this.defaults,...t}}clone(){return new u(this.defaults)}clear(){this._getInstance().clear()}destroy(){var e;(e=this._innerApp)==null||e.unmount(),o.destroyObject(this)}isDestroyed(){return!1}install(e,t={}){const{property:i,...n}=t;this.config(n),e.config.globalProperties[i||"$notice"]=this}_getInstance(){return this._instance||(this._container=document.createElement("div"),this._innerApp=_.createApp(C),this._instance=this._innerApp.mount(this._container),document.body.appendChild(this._container.firstElementChild)),this._instance}_open(e,t,i,n){var p,m;if(!o.isClient)return o.noop;let s;o.isObject(t)?s=t:typeof i=="number"?s={title:t,duration:i}:i?s={title:t,content:i,duration:n}:s={title:t,duration:n};const a=(p=s.key)!=null?p:k(),l=this._getInstance(),v=e?(m=y[e])!=null?m:{}:{};let h;const f=s.onClose,b=()=>{if(clearTimeout(h),typeof f=="function")return f()},r=Object.assign({},this.defaults,v,s,{key:a,type:e,onClose:b});r.icon&&typeof r.icon!="function"&&(r.icon=_.markRaw(r.icon)),l.add(r);const d=typeof r.duration=="number"?r.duration:4e3;return d>=500&&(h=setTimeout(()=>{l.remove(a)},d)),()=>{clearTimeout(h),l.remove(a)}}}const w=new u;exports.Notice=w;exports.NoticeManager=u;

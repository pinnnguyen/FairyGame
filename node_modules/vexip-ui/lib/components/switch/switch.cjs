"use strict";var e=require("vue");require("../icon/index.cjs");require("../form/index.cjs");require("../../common/config/src/index.cjs");var k=require("@vexip-ui/utils"),z=require("@vexip-ui/icons"),N=require("./props.cjs"),B=require("../../_virtual/plugin-vue_export-helper.cjs"),q=require("../icon/icon.cjs"),$=require("../form/helper.cjs"),p=require("../../common/config/src/props.cjs"),I=require("../../common/config/src/namespace.cjs");const E=e.defineComponent({name:"Switch",components:{Icon:q},props:N.switchProps,emits:["update:value"],setup(o,{emit:t}){const{idFor:c,state:u,disabled:d,loading:m,size:a,validateField:h,getFieldValue:g,setFieldValue:f}=$.useFieldStore(()=>{var l;return(l=v.value)==null?void 0:l.focus()}),n=p.useProps("switch",o,{size:p.createSizeProp(a),state:p.createStateProp(u),value:{default:()=>g(!1),static:!0},disabled:()=>d.value,openColor:"",closeColor:"",loading:()=>m.value,loadingIcon:z.Spinner,loadingSpin:!1,openIcon:null,closeIcon:null,openText:"",closeText:"",onBeforeChange:{default:null,isFunc:!0}}),s=I.useNameHelper("switch"),r=e.ref(n.value),v=e.ref(),b=e.computed(()=>[s.b(),s.bs("vars"),{[s.bm("inherit")]:n.inherit,[s.bm("open")]:r.value,[s.bm(n.size)]:n.size!=="default",[s.bm(n.state)]:n.state!=="default",[s.bm("disabled")]:n.disabled,[s.bm("loading")]:n.loading}]),C=e.computed(()=>({backgroundColor:r.value?n.openColor:n.closeColor})),S=e.computed(()=>({color:r.value?n.openColor:n.closeColor})),V=e.computed(()=>n.disabled||n.loading);e.watch(()=>n.value,l=>{r.value=l}),e.watch(r,l=>{f(l),p.emitEvent(n.onChange,l),t("update:value",l),h()});async function y(l=!r.value){if(l===r.value)return;let i=!0;typeof n.onBeforeChange=="function"&&(i=n.onBeforeChange(l),k.isPromise(i)&&(i=await i)),i!==!1&&(r.value=l)}return{props:n,nh:s,idFor:c,currentValue:r,className:b,style:C,signalStyle:S,isDisabled:V,input:v,handleChange:y}}}),T=["id","aria-checked"],j=["checked","disabled"];function w(o,t,c,u,d,m){const a=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("label",{id:o.idFor,class:e.normalizeClass(o.className),role:"switch","aria-checked":o.currentValue,style:e.normalizeStyle(o.style)},[e.createElementVNode("span",{class:e.normalizeClass(o.nh.be("placeholder"))},[e.createElementVNode("span",{class:e.normalizeClass(o.nh.be("open-text"))},[e.renderSlot(o.$slots,"open",{},()=>[e.createTextVNode(e.toDisplayString(o.props.openText),1)])],2),e.createElementVNode("span",{class:e.normalizeClass(o.nh.be("close-text"))},[e.renderSlot(o.$slots,"close",{},()=>[e.createTextVNode(e.toDisplayString(o.props.closeText),1)])],2)],2),e.createElementVNode("span",{class:e.normalizeClass(o.nh.be("signal")),style:e.normalizeStyle(o.signalStyle)},[o.props.loading?e.renderSlot(o.$slots,"loading",{key:0},()=>[e.createVNode(a,{spin:o.props.loadingSpin,pulse:!o.props.loadingSpin,icon:o.props.loadingIcon},null,8,["spin","pulse","icon"])]):e.renderSlot(o.$slots,"icon",{key:1,value:o.currentValue},()=>[o.currentValue&&o.props.openIcon?(e.openBlock(),e.createBlock(a,{key:0,icon:o.props.openIcon},null,8,["icon"])):!o.currentValue&&o.props.closeIcon?(e.openBlock(),e.createBlock(a,{key:1,icon:o.props.closeIcon},null,8,["icon"])):e.createCommentVNode("",!0)])],6),e.createElementVNode("span",{class:e.normalizeClass(o.nh.be("label"))},[o.currentValue?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(o.nh.be("open-text"))},[e.renderSlot(o.$slots,"open",{},()=>[e.createTextVNode(e.toDisplayString(o.props.openText),1)])],2)):(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(o.nh.be("close-text"))},[e.renderSlot(o.$slots,"close",{},()=>[e.createTextVNode(e.toDisplayString(o.props.closeText),1)])],2))],2),e.createElementVNode("input",{ref:"input",type:"checkbox",class:e.normalizeClass(o.nh.be("input")),checked:o.currentValue,disabled:o.isDisabled,onChange:t[0]||(t[0]=h=>o.handleChange())},null,42,j)],14,T)}var F=B(E,[["render",w]]);module.exports=F;

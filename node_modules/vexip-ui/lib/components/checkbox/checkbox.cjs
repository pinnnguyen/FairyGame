"use strict";var e=require("vue");require("../form/index.cjs");require("../../common/config/src/index.cjs");var p=require("@vexip-ui/utils"),T=require("./props.cjs"),H=require("./symbol.cjs"),U=require("../../_virtual/plugin-vue_export-helper.cjs"),A=require("../form/helper.cjs"),u=require("../../common/config/src/props.cjs"),G=require("../../common/config/src/namespace.cjs");const M=e.defineComponent({name:"Checkbox",props:T.checkboxProps,emits:["update:checked"],setup(s,{slots:o,emit:k}){const{idFor:g,state:V,disabled:q,loading:m,size:F,validateField:E,getFieldValue:I,setFieldValue:N}=A.useFieldStore(()=>{var n;return(n=c.value)==null?void 0:n.focus()}),l=u.useProps("checkbox",s,{size:u.createSizeProp(F),state:u.createStateProp(V),checked:{default:()=>I(!1),static:!0},label:null,value:{default:null,static:!0},labelClass:null,disabled:()=>q.value,border:!1,control:!1,partial:!1,tabIndex:0,loading:()=>m.value,loadingLock:!1}),a=e.inject(H.GROUP_STATE,null),r=G.useNameHelper("checkbox"),t=e.ref(l.checked),b=e.ref(l.partial),c=e.ref(),h=e.reactive({checked:t,partial:b}),z=e.computed(()=>(a==null?void 0:a.size)||l.size),j=e.computed(()=>(a==null?void 0:a.state)||l.state),v=e.computed(()=>(a==null?void 0:a.disabled)||l.disabled),f=e.computed(()=>(a==null?void 0:a.loading)||l.loading),L=e.computed(()=>(a==null?void 0:a.loadingLock)||l.loadingLock),$=e.computed(()=>[r.b(),r.bs("vars"),{[r.bm("inherit")]:l.inherit,[r.bm("checked")]:t.value,[r.bm("disabled")]:v.value,[r.bm("loading")]:f.value&&L.value,[r.bm(z.value)]:z.value!=="default",[r.bm("border")]:l.border,[r.bm("partial")]:l.control&&b.value,[r.bm(j.value)]:j.value!=="default"}]),w=e.computed(()=>p.isDefined(l.label)&&l.label!==""),P=e.computed(()=>!!o.default),i=e.computed(()=>{var n;return(n=l.value)!=null?n:l.label});if(e.watch(()=>l.checked,n=>{C(n)}),e.watch(()=>l.partial,n=>{b.value=n}),e.watch(t,n=>{N(n),u.emitEvent(l.onChange,n),k("update:checked",n)}),a){let n=!1;e.watch(i,(d,D)=>{p.isFunction(a.replaceValue)&&a.replaceValue(D,d)}),e.watch(()=>l.control,d=>{d?(n&&(a.decreaseItem(i.value,c),n=!1),a.increaseControl(h)):a.decreaseControl(h)},{immediate:!0}),e.watch(()=>a.currentValues,d=>{l.control||C(d.includes(i.value))},{immediate:!0}),e.onMounted(()=>{l.control||(a.increaseItem(i.value,t.value,c),n=!0)}),e.onBeforeUnmount(()=>{l.control?a.decreaseControl(h):a.decreaseItem(i.value,c)})}function C(n){l.control&&p.isFunction(a==null?void 0:a.handleControlChange)?a.handleControlChange():t.value=n}function y(n){v.value||f.value&&L.value||(C(n),!l.control&&a&&p.isFunction(a.setItemChecked)&&a.setItemChecked(i.value,n),a||E())}function B(n){u.emitEvent(l.onClick,n)}return{props:l,nh:r,idFor:g,currentChecked:t,isDisabled:v,className:$,hasLabel:w,hasSlot:P,isLoading:f,input:c,handleChange:y,handleClick:B}}}),O=["aria-disabled"],R=["checked","disabled","tabindex"];function J(s,o,k,g,V,q){return e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(s.className),"aria-disabled":s.isDisabled,onClick:o[1]||(o[1]=(...m)=>s.handleClick&&s.handleClick(...m))},[e.createElementVNode("span",{class:e.normalizeClass([s.nh.be("signal"),s.isLoading&&s.nh.bem("signal","active")])},null,2),s.hasLabel||s.hasSlot?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass([s.nh.be("label"),s.props.labelClass])},[e.renderSlot(s.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(s.props.label),1)])],2)):e.createCommentVNode("",!0),e.createElementVNode("input",{ref:"input",type:"checkbox",class:e.normalizeClass(s.nh.be("input")),checked:s.currentChecked,disabled:s.isDisabled,tabindex:s.props.tabIndex,onChange:o[0]||(o[0]=m=>s.handleChange(!s.currentChecked))},null,42,R)],10,O)}var K=U(M,[["render",J]]);module.exports=K;

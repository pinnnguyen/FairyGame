"use strict";var e=require("vue");require("./index.cjs");require("../form/index.cjs");require("../../common/config/src/index.cjs");var d=require("@vexip-ui/utils"),$=require("./props.cjs"),G=require("./symbol.cjs"),P=require("../../_virtual/plugin-vue_export-helper.cjs"),T=require("./checkbox.cjs"),A=require("../form/helper.cjs"),f=require("../../common/config/src/props.cjs"),M=require("../../common/config/src/namespace.cjs"),O=require("../../common/config/src/locale/index.cjs");const I=e.defineComponent({name:"CheckboxGroup",components:{Checkbox:T},props:$.checkboxGroupProps,emits:["update:value"],setup(n,{emit:v}){const{idFor:g,state:x,disabled:C,loading:y,size:p,validateField:a,getFieldValue:m,setFieldValue:B}=A.useFieldStore(()=>{var o,t;return(t=(o=Array.from(k)[0])==null?void 0:o.value)==null?void 0:t.focus()}),r=f.useProps("checkboxGroup",n,{size:f.createSizeProp(p),state:f.createStateProp(x),value:{default:()=>m([]),static:!0},vertical:!1,disabled:()=>C.value,border:!1,options:{default:()=>[],static:!0},loading:()=>y.value,control:null,loadingLock:!1}),s=M.useNameHelper("checkbox-group"),_=O.useLocale("checkbox"),c=new Map,k=new Set,b=new Set,l=e.ref(r.value||[]),z=e.computed(()=>[s.b(),s.ns("checkbox-vars"),{[s.bm("inherit")]:r.inherit,[s.bm("vertical")]:r.vertical,[s.bm("disabled")]:r.disabled,[s.bm("loading")]:r.loading&&r.loadingLock,[s.bm(r.size)]:r.size!=="default",[s.bm("border")]:r.border,[s.bm(r.state)]:r.state!=="default"}]),E=e.computed(()=>typeof r.control=="string"?r.control:_.value.all),j=d.debounceMinor(()=>{l.value=[],c.forEach((o,t)=>{o&&l.value.push(t)}),V(l.value)}),h=d.debounceMinor(()=>{const o=l.value.length,t=o===c.size,i=o>0&&!t;b.forEach(u=>{u.checked=t,u.partial=i})});e.provide(G.GROUP_STATE,e.reactive({currentValues:l,size:e.toRef(r,"size"),state:e.toRef(r,"state"),disabled:e.toRef(r,"disabled"),loading:e.toRef(r,"loading"),loadingLock:e.toRef(r,"loadingLock"),increaseItem:L,decreaseItem:F,increaseControl:q,decreaseControl:S,handleControlChange:N,setItemChecked:w,replaceValue:D})),e.watch(()=>r.value,o=>{const t=new Set(o),i=Array.from(c.keys());l.value=[],i.forEach(u=>{const R=t.has(u);c.set(u,t.has(u)),R&&l.value.push(u)})}),e.watch(l,()=>{h()});function L(o,t,i){c.set(o,t),k.add(i)}function F(o,t){c.delete(o),k.delete(t)}function q(o){b.add(o),h()}function S(o){b.delete(o)}function w(o,t){!d.isDefined(o)||!c.has(o)||(c.set(o,t),j(),h())}function N(){const o=Array.from(c.keys()),t=l.value.length!==o.length;o.forEach(i=>{c.set(i,t)}),j(),h()}function V(o){B(o),f.emitEvent(r.onChange,o),v("update:value",o),a()}function D(o,t){d.isDefined(o)&&d.isDefined(t)&&o!==t&&c.has(o)&&(c.set(t,c.get(o)),c.delete(o))}return{props:r,idFor:g,className:z,controlLabel:E,isObject:d.isObject,increaseControl:q,decreaseControl:S}}}),H=["id"];function U(n,v,g,x,C,y){const p=e.resolveComponent("Checkbox");return e.openBlock(),e.createElementBlock("div",{id:n.idFor,class:e.normalizeClass(n.className),role:"group"},[e.renderSlot(n.$slots,"default",{},()=>[n.props.control?(e.openBlock(),e.createBlock(p,{key:0,inherit:"",control:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.controlLabel),1)]),_:1})):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.props.options,(a,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:m},[n.isObject(a)?(e.openBlock(),e.createBlock(p,{key:0,inherit:"",value:a.value,control:a.control},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.label||a.value),1)]),_:2},1032,["value","control"])):(e.openBlock(),e.createBlock(p,{key:1,inherit:"",value:a},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a),1)]),_:2},1032,["value"]))],64))),128))])],10,H)}var J=P(I,[["render",U]]);module.exports=J;

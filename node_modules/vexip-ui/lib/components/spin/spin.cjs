"use strict";var e=require("vue");require("../icon/index.cjs");require("../../common/config/src/index.cjs");var d=require("@vexip-ui/utils"),y=require("@vexip-ui/icons"),f=require("./props.cjs"),C=require("../../_virtual/plugin-vue_export-helper.cjs"),B=require("../icon/icon.cjs"),S=require("../../common/config/src/namespace.cjs"),p=require("../../common/config/src/props.cjs");const b=e.defineComponent({name:"Spin",components:{Icon:B},props:f.spinProps,setup(n,{slots:s}){const i=S.useNameHelper("spin"),o=p.useProps("spin",n,{active:{default:!1,static:!0},icon:y.Spinner,spin:!1,inner:!1,delay:!1,tip:"",hideMask:!1,maskColor:"",maskClass:null,transitionName:()=>i.ns("fade")}),t=e.ref(o.active),c=e.computed(()=>!!(o.tip||s.tip)),a=e.computed(()=>{const r={};return o.maskColor&&(r[i.cv("mask-bg-color")]=o.maskColor),r}),l=e.computed(()=>{if(o.delay){if(o.delay===!0)return{enter:500,leave:500};if(typeof o.delay=="number")return{enter:o.delay,leave:o.delay};if(Array.isArray(o.delay))return{enter:d.toNumber(o.delay[0]),leave:d.toNumber(o.delay[1])}}return{enter:0,leave:0}});let m;e.watch(()=>o.active,r=>{clearTimeout(m);const u=r?l.value.enter:l.value.leave;u?m=setTimeout(()=>{t.value=r},u):t.value=r});function k(r){p.emitEvent(o.onMaskClick,r)}function v(){p.emitEvent(o.onShow)}function h(){p.emitEvent(o.onHide)}return{props:o,nh:i,currentActive:t,hasTip:c,maskStyle:a,handleMaskClick:k,handleShow:v,handleHide:h}}}),N=["aria-busy"];function E(n,s,i,o,t,c){const a=e.resolveComponent("Icon");return n.props.inner?(e.openBlock(),e.createBlock(e.Transition,{key:1,appear:"",name:n.props.transitionName,onAfterEnter:n.handleShow,onAfterLeave:n.handleHide},{default:e.withCtx(()=>[n.currentActive?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([n.nh.b(),n.nh.bs("vars"),n.nh.bm("inner")])},[n.props.hideMask?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([n.nh.be("mask"),n.props.maskClass]),style:e.normalizeStyle(n.maskStyle),onClick:s[1]||(s[1]=(...l)=>n.handleMaskClick&&n.handleMaskClick(...l))},null,6)),e.renderSlot(n.$slots,"content",{},()=>[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("icon"))},[e.renderSlot(n.$slots,"icon",{},()=>[n.props.spin?(e.openBlock(),e.createBlock(a,{key:0,spin:"",icon:n.props.icon},null,8,["icon"])):(e.openBlock(),e.createBlock(a,{key:1,pulse:"",icon:n.props.icon},null,8,["icon"]))])],2),n.hasTip?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("tip"))},[e.renderSlot(n.$slots,"tip",{},()=>[e.createTextVNode(e.toDisplayString(n.props.tip),1)])],2)):e.createCommentVNode("",!0)])],2)):e.createCommentVNode("",!0)]),_:3},8,["name","onAfterEnter","onAfterLeave"])):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([n.nh.b(),n.nh.bs("vars"),n.props.inherit&&n.nh.bm("inherit")]),"aria-busy":n.currentActive?"true":void 0},[e.renderSlot(n.$slots,"default"),e.createVNode(e.Transition,{appear:"",name:n.props.transitionName,onAfterEnter:n.handleShow,onAfterLeave:n.handleHide},{default:e.withCtx(()=>[n.currentActive?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("loading"))},[n.props.hideMask?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([n.nh.be("mask"),n.props.maskClass]),style:e.normalizeStyle(n.maskStyle),onClick:s[0]||(s[0]=(...l)=>n.handleMaskClick&&n.handleMaskClick(...l))},null,6)),e.renderSlot(n.$slots,"content",{},()=>[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("icon"))},[e.renderSlot(n.$slots,"icon",{},()=>[n.props.spin?(e.openBlock(),e.createBlock(a,{key:0,spin:"",icon:n.props.icon},null,8,["icon"])):(e.openBlock(),e.createBlock(a,{key:1,pulse:"",icon:n.props.icon},null,8,["icon"]))])],2),n.hasTip?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("tip"))},[e.renderSlot(n.$slots,"tip",{},()=>[e.createTextVNode(e.toDisplayString(n.props.tip),1)])],2)):e.createCommentVNode("",!0)])],2)):e.createCommentVNode("",!0)]),_:3},8,["name","onAfterEnter","onAfterLeave"])],10,N))}var A=C(b,[["render",E]]);module.exports=A;

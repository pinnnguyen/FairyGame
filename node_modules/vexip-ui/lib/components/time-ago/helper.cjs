"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../common/config/src/index.cjs");var s=require("@vexip-ui/utils"),_=require("../../common/config/src/locale/index.cjs");let m=1;function S(){return m++}const f=new Map;let l,M;function N(r,o){f.set(r,o),f.size&&!M&&(clearInterval(l),l=setInterval(()=>{M=!0;const e=Date.now();f.forEach(n=>{!n.interval||e-n.updated>n.interval&&(n.timeAgo.value=I(n.datetime,e,n.locale.value,n.wordSpace.value),n.updated=e)})},5e3))}function O(r){f.delete(r),f.size||(clearInterval(l),M=!1)}function I(r,o,e,n){const t=Math.abs(o-r.getTime()),L=o>r.getTime()?e.ago:e.late;let i,u,a=!1;return t<10*s.SECOND_ON_MILLS?(i=e.justNow,a=!0):t<s.MINUTE_ON_MILLS?(i=e.second,u=Math.floor(t/s.SECOND_ON_MILLS)):t<s.HOUR_ON_MILLS?(i=e.minute,u=Math.floor(t/s.MINUTE_ON_MILLS)):t<s.DAY_ON_MILLIS?(i=e.hour,u=Math.floor(t/s.HOUR_ON_MILLS)):t<30*s.DAY_ON_MILLIS?(u=Math.floor(t/s.DAY_ON_MILLIS),u===1?(i=e.yesterday,a=!0):i=e.days):t<365*s.DAY_ON_MILLIS?(u=Math.floor(t/(30*s.DAY_ON_MILLIS)),u===1?(i=e.lastMonth,a=!0):i=e.months):(u=Math.floor(t/365/s.DAY_ON_MILLIS),u===1?(i=e.lastYear,a=!0):i=e.years),a?i:_.makeSentence(`${_.getCountWord(i,u)} ${L}`,n)}exports.computeTimeAgo=I;exports.getId=S;exports.subscribe=N;exports.unsubscribe=O;

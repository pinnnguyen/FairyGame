"use strict";var r=require("vue");require("../../common/config/src/index.cjs");var f=require("@vexip-ui/utils"),i=require("./helper.cjs"),h=require("./props.cjs"),q=require("../../_virtual/plugin-vue_export-helper.cjs"),A=require("../../common/config/src/props.cjs"),w=require("../../common/config/src/namespace.cjs"),v=require("../../common/config/src/locale/index.cjs");const j=r.defineComponent({name:"TimeAgo",props:h.timeAgoProps,setup(o){const t=A.useProps("timeAgo",o,{datetime:{default:()=>Date.now(),static:!0},interval:{default:!1,validator:e=>e&&e>=5},title:!1,titleFormat:"yyyy-MM-dd HH:mm:ss"}),p=w.useNameHelper("time-ago"),n=d(t.datetime),a=v.useLocale("timeAgo"),s=r.computed(()=>{var e;return((e=v.useLocale())==null?void 0:e.value.wordSpace)||!1}),c=r.ref(i.computeTimeAgo(n,Date.now(),a.value,s.value)),l=i.getId(),u={datetime:n,timeAgo:c,locale:a,wordSpace:s,interval:m(t.interval),updated:Date.now()},g=r.computed(()=>{if(!!t.title)return typeof t.title=="string"?t.title:f.format(t.datetime,t.titleFormat)});i.subscribe(l,u),r.watch(()=>t.datetime,e=>{u.datetime=d(e),c.value=i.computeTimeAgo(n,Date.now(),a.value,s.value)}),r.watch(()=>t.interval,e=>{u.interval=m(e)}),r.onBeforeUnmount(()=>{i.unsubscribe(l)});function m(e){return e&&(e===!0?1e4:e*1e3)}function d(e){return typeof e=="string"&&(e=e.replace(/-/g,"/")),f.toDate(e)}return{nh:p,props:t,timeAgo:c,currentTitle:g}}}),y=["title"];function D(o,t,p,n,a,s){return r.openBlock(),r.createElementBlock("span",{class:r.normalizeClass([o.nh.b(),o.props.inherit&&o.nh.bm("inherit")]),title:o.currentTitle},r.toDisplayString(o.timeAgo),11,y)}var b=q(j,[["render",D]]);module.exports=b;

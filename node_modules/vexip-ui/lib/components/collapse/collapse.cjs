"use strict";var r=require("vue");require("../../common/config/src/index.cjs");var h=require("@vexip-ui/utils"),g=require("./props.cjs"),x=require("./symbol.cjs"),y=require("../../_virtual/plugin-vue_export-helper.cjs"),l=require("../../common/config/src/props.cjs"),E=require("../../common/config/src/namespace.cjs");const q=r.defineComponent({name:"Collapse",props:g.collapseProps,emits:["update:expanded"],setup(t,{emit:i}){const s=l.useProps("collapse",t,{expanded:{default:null,static:!0},card:!1,accordion:!1,arrowType:{default:"right",validator:e=>["right","left","none"].includes(e)},ghost:!1}),o=E.useNameHelper("collapse"),c=new Map,n=r.ref([]),d=r.computed(()=>[o.b(),o.bs("vars"),o.bm(`arrow-${s.arrowType}`),{[o.bm("inherit")]:s.inherit,[o.bm("card")]:s.card,[o.bm("ghost")]:!s.card&&s.ghost}]);r.provide(x.COLLAPSE_STATE,r.reactive({arrowType:r.toRef(s,"arrowType"),registerPane:v,unregisterPane:f,expandPane:u})),r.watchEffect(()=>{const e=s.expanded,a=s.accordion&&Array.isArray(e)?e[0]:e||e===0?e:[];n.value=Array.isArray(a)?Array.from(a):[a]}),r.onMounted(()=>{r.nextTick(p)});function v(e,a){c.set(e,a),n.value.includes(e)?a.value=!0:a.value&&u(e,!0)}function f(e){c.delete(e),u(e,!1)}function u(e,a){!e&&e!==0||(s.accordion?n.value=a?[e]:[]:a?n.value.push(e):h.removeArrayItem(n.value,e),m(),p())}function m(){l.emitEvent(s.onChange,n.value),i("update:expanded",n.value)}function p(){c.forEach((e,a)=>{e.value=n.value.includes(a)})}return{className:d}}});function w(t,i,s,o,c,n){return r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(t.className),role:"tablist"},[r.renderSlot(t.$slots,"default")],2)}var A=y(q,[["render",w]]);module.exports=A;

"use strict";var e=require("vue");require("../collapse-transition/index.cjs");require("../icon/index.cjs");require("../../common/config/src/index.cjs");var h=require("@vexip-ui/utils"),g=require("@vexip-ui/icons"),b=require("./props.cjs"),C=require("./symbol.cjs"),T=require("../../_virtual/plugin-vue_export-helper.cjs"),y=require("./collapse-transition.cjs"),q=require("../icon/icon.cjs"),m=require("../../common/config/src/props.cjs"),N=require("../../common/config/src/namespace.cjs");const E=e.defineComponent({name:"CollapsePanel",components:{CollapseTransition:y,Icon:q,ChevronRight:g.ChevronRight},props:b.collapsePanelProps,emits:["update:expanded"],setup(n,{emit:c}){const o=m.useProps("collapsePanel",n,{label:{default:null,static:!0},title:"",disabled:!1,contentStyle:null,expanded:!1,card:!1,arrowType:{default:"right",validator:t=>["right","left","none"].includes(t)},icon:null,ghost:!1}),r=e.inject(C.COLLAPSE_STATE,null),l=N.useNameHelper("collapse"),s=e.ref(o.expanded),a=e.ref(""),i=e.computed(()=>r?!1:o.card),p=e.computed(()=>r?!1:o.ghost),u=e.computed(()=>r?r.arrowType:o.arrowType),v=e.computed(()=>[l.be("panel"),l.bs("vars"),l.bem("panel",`arrow-${u.value}`),{[l.bem("panel","inherit")]:r||o.inherit,[l.bem("panel","card")]:i.value,[l.bem("panel","ghost")]:!i.value&&p.value,[l.bem("panel","expanded")]:s.value,[l.bem("panel","disabled")]:o.disabled}]);e.watch(()=>o.label,t=>{const d=a.value;a.value=t||t===0?t:d,r&&d!==a.value&&(r.unregisterPane(d),r.registerPane(a.value,s))}),e.watch(s,t=>{m.emitEvent(o.onToggle,t),c("update:expanded",t)}),r||e.watch(()=>o.expanded,t=>{s.value=t}),r&&(e.onMounted(()=>{o.label||o.label===0?a.value=o.label:a.value=h.randomString(),r.registerPane(a.value,s)}),e.onBeforeUnmount(()=>{r.unregisterPane(a.value)}));function f(){o.disabled||(r?r.expandPane(a.value,!s.value):s.value=!s.value)}return{props:o,nh:l,inGroup:!!r,currentExpanded:s,className:v,handleToggle:f}}}),P=["role","aria-expanded"];function V(n,c,o,r,l,s){const a=e.resolveComponent("ChevronRight"),i=e.resolveComponent("Icon"),p=e.resolveComponent("CollapseTransition");return e.openBlock(),e.createElementBlock("section",{class:e.normalizeClass(n.className),role:n.inGroup?"tab":void 0,"aria-expanded":n.currentExpanded},[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("header")),onClick:c[0]||(c[0]=(...u)=>n.handleToggle&&n.handleToggle(...u))},[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("arrow"))},[e.createVNode(i,null,{default:e.withCtx(()=>[e.createVNode(a)]),_:1})],2),e.renderSlot(n.$slots,"title",{},()=>[n.props.icon?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("icon"))},[e.createVNode(i,{icon:n.props.icon},null,8,["icon"])],2)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.props.title),1)])],2),e.createVNode(p,null,{default:e.withCtx(()=>[n.currentExpanded?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(n.nh.be("body"))},[e.createElementVNode("div",{class:e.normalizeClass(n.nh.be("content")),style:e.normalizeStyle(n.props.contentStyle)},[e.renderSlot(n.$slots,"default")],6)],2)):e.createCommentVNode("",!0)]),_:3})],10,P)}var j=T(E,[["render",V]]);module.exports=j;
